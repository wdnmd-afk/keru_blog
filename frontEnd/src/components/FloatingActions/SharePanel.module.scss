/**
 * 分享面板样式
 *
 * 设计理念：
 * 1. 与现有深蓝主题保持一致
 * 2. 响应式设计适配
 * 3. 良好的视觉层次和交互反馈
 * 4. 无障碍访问支持
 */

// 引用全局色彩变量
:root {
    --primary-dark: #0a0e1a;
    --primary-blue: #1a2332;
    --accent-blue: #2d4263;
    --highlight-blue: #3e5c7a;
    --text-primary: #ffffff;
    --text-secondary: #b8c5d1;
    --text-muted: #8a9ba8;
    --border-color: rgba(62, 92, 122, 0.3);
    --card-bg: rgba(26, 35, 50, 0.95);
    --shadow-dark: rgba(0, 0, 0, 0.5);
    --gradient-primary: linear-gradient(135deg, #0a0e1a 0%, #1a2332 50%, #2d4263 100%);
    --gradient-accent: linear-gradient(135deg, #2d4263 0%, #3e5c7a 100%);
}

// 分享面板遮罩层
.share_panel_overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(8px);
    z-index: 1100;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
    animation: fadeIn 0.3s ease-out;

    @media (max-width: 768px) {
        padding: 10px;
        align-items: flex-end;
    }
}

// 分享面板主体
.share_panel {
    background: var(--card-bg);
    border: 1px solid var(--border-color);
    border-radius: 16px;
    box-shadow:
        0 20px 40px rgba(0, 0, 0, 0.4),
        0 0 0 1px rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(20px);
    max-width: 480px;
    width: 100%;
    max-height: 80vh;
    overflow-y: auto;
    animation: slideUp 0.3s ease-out;

    // 覆盖Ant Design Card样式
    :global(.ant-card-head) {
        background: transparent;
        border-bottom: 1px solid var(--border-color);
        padding: 16px 20px;
        min-height: auto;
    }

    :global(.ant-card-body) {
        padding: 20px;
    }

    :global(.ant-card-head-title) {
        padding: 0;
        color: var(--text-primary);
    }

    @media (max-width: 768px) {
        border-radius: 16px 16px 0 0;
        max-height: 70vh;

        :global(.ant-card-head),
        :global(.ant-card-body) {
            padding: 16px;
        }
    }
}

// 面板头部
.panel_header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
}

.panel_title {
    margin: 0 !important;
    color: var(--text-primary) !important;
    font-size: 18px !important;
    font-weight: 600 !important;
}

.close_button {
    color: var(--text-secondary);
    border: none;
    background: transparent;
    padding: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 6px;
    transition: all 0.2s ease;

    &:hover,
    &:focus {
        color: var(--text-primary);
        background: rgba(62, 92, 122, 0.2);
        transform: scale(1.1);
    }

    &:active {
        transform: scale(0.95);
    }
}

// 分享内容预览
.share_preview {
    background: rgba(62, 92, 122, 0.1);
    border: 1px solid var(--border-color);
    border-radius: 12px;
    padding: 16px;
    margin-bottom: 16px;
}

.preview_title {
    display: block;
    color: var(--text-primary) !important;
    font-size: 16px !important;
    font-weight: 600 !important;
    margin-bottom: 8px !important;
    line-height: 1.4;
    overflow: hidden;
    text-overflow: ellipsis;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
}

.preview_description {
    display: block;
    color: var(--text-secondary) !important;
    font-size: 14px !important;
    margin-bottom: 12px !important;
    line-height: 1.5;
    overflow: hidden;
    text-overflow: ellipsis;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
}

.preview_url {
    display: block;
    color: var(--text-muted) !important;
    font-size: 12px !important;
    background: rgba(62, 92, 122, 0.2) !important;
    border: 1px solid var(--border-color) !important;
    border-radius: 6px !important;
    padding: 6px 8px !important;
    word-break: break-all;
    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace !important;
}

// 分享选项区域
.share_options {
    margin: 20px 0;

    // 统一网格间距，确保视觉平衡
    :global(.ant-row) {
        margin: -8px; // 负边距抵消gutter
    }

    :global(.ant-col) {
        padding: 8px; // 统一列间距
    }
}

.share_button {
    // 统一按钮尺寸
    height: 52px !important; // 统一高度，使用!important确保覆盖Ant Design默认样式
    min-height: 52px;
    width: 100% !important; // 确保宽度填满容器
    min-width: 100px; // 设置最小宽度，保证小屏幕下的可用性

    // 视觉样式优化
    border: 1.5px solid var(--border-color) !important;
    background: rgba(62, 92, 122, 0.08) !important; // 更柔和的背景
    color: var(--text-primary) !important;
    border-radius: 10px !important; // 稍微减小圆角，更现代

    // 布局和对齐
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    justify-content: center !important;
    gap: 4px !important; // 图标和文字间距
    padding: 8px 12px !important; // 统一内边距

    // 动画和交互
    transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1) !important;
    position: relative;
    overflow: hidden;

    // 文字样式
    font-weight: 500 !important;
    font-size: 13px !important;
    line-height: 1.2 !important;
    text-align: center !important;

    // 悬停状态优化
    &:hover,
    &:focus {
        border-color: var(--highlight-blue) !important;
        background: rgba(62, 92, 122, 0.15) !important;
        color: var(--text-primary) !important;
        transform: translateY(-1px) !important; // 轻微上移效果
        box-shadow: 0 4px 12px rgba(62, 92, 122, 0.25) !important;

        // 图标悬停效果
        :global(.anticon) {
            transform: scale(1.1);
            color: var(--highlight-blue);
        }
    }

    // 激活状态
    &:active {
        transform: translateY(0) !important;
        box-shadow: 0 2px 6px rgba(62, 92, 122, 0.2) !important;
    }

    // 禁用状态
    &:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        transform: none !important;
        box-shadow: none !important;
    }

    // 图标样式统一
    :global(.anticon) {
        font-size: 20px !important; // 统一图标大小
        color: var(--text-secondary);
        transition: all 0.2s ease;
        margin-bottom: 0 !important; // 移除默认下边距
        line-height: 1;
    }

    // 确保文本不换行
    span {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        max-width: 100%;
    }
}

.share_button_text {
    font-size: 12px !important;
    font-weight: 500 !important;
    text-align: center !important;
    line-height: 1.2 !important;
    color: var(--text-primary) !important;
    margin: 0 !important;

    // 响应式字体大小
    @media (max-width: 768px) {
        font-size: 11px !important;
    }

    @media (max-width: 480px) {
        font-size: 10px !important;
    }
}

// 快捷操作区域
.quick_actions {
    display: flex;
    justify-content: center;
    gap: 12px; // 统一按钮间距
    margin-top: 20px;
    padding: 0 8px; // 添加左右内边距

    :global(.ant-btn) {
        // 统一尺寸，与分享按钮保持一致
        height: 52px !important;
        min-width: 120px; // 设置最小宽度
        border-radius: 10px !important;
        font-weight: 500 !important;
        font-size: 14px !important;
        padding: 0 16px !important;

        // 统一动画效果
        transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1) !important;

        // 统一悬停效果
        &:hover {
            transform: translateY(-1px) !important;
        }

        &:active {
            transform: translateY(0) !important;
        }

        // 确保文本不换行
        span {
            white-space: nowrap;
        }
    }

    :global(.ant-btn-primary) {
        background: var(--gradient-accent) !important;
        border: 1.5px solid transparent !important;
        box-shadow: 0 2px 8px rgba(62, 92, 122, 0.3) !important;
        color: var(--text-primary) !important;

        &:hover {
            background: linear-gradient(135deg, #4a6b8a 0%, #3e5c7a 100%) !important;
            box-shadow: 0 4px 12px rgba(62, 92, 122, 0.4) !important;
            border-color: var(--highlight-blue) !important;
            color: var(--text-primary) !important;
        }

        &:active {
            box-shadow: 0 2px 6px rgba(62, 92, 122, 0.3) !important;
        }
    }

    :global(.ant-btn-default) {
        background: rgba(62, 92, 122, 0.08) !important;
        border: 1.5px solid var(--border-color) !important;
        color: var(--text-primary) !important;

        &:hover {
            background: rgba(62, 92, 122, 0.15) !important;
            border-color: var(--highlight-blue) !important;
            color: var(--text-primary) !important;
            box-shadow: 0 4px 12px rgba(62, 92, 122, 0.25) !important;
        }

        &:active {
            box-shadow: 0 2px 6px rgba(62, 92, 122, 0.2) !important;
        }
    }

    // 响应式设计
    @media (max-width: 768px) {
        flex-direction: column;
        gap: 8px;

        :global(.ant-btn) {
            width: 100%;
            min-width: auto;
        }
    }

    @media (max-width: 480px) {
        margin-top: 16px;
        padding: 0 4px;

        :global(.ant-btn) {
            height: 48px !important;
            font-size: 13px !important;
            padding: 0 12px !important;
        }
    }
}

// 动画效果
@keyframes fadeIn {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

@keyframes slideUp {
    from {
        opacity: 0;
        transform: translateY(40px) scale(0.95);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

// 响应式适配优化
@media (max-width: 768px) {
    .share_panel {
        max-width: 90vw;
        margin: 0 auto;
    }

    .share_options {
        margin: 16px 0;

        :global(.ant-col) {
            padding: 6px; // 减小平板设备上的间距
        }
    }
}

@media (max-width: 480px) {
    .share_panel {
        max-width: 95vw;
        border-radius: 12px;

        :global(.ant-card-head),
        :global(.ant-card-body) {
            padding: 12px;
        }
    }

    .share_preview {
        padding: 12px;
    }

    .share_options {
        margin: 12px 0;

        :global(.ant-col) {
            padding: 4px; // 进一步减小手机设备上的间距
        }
    }

    .share_button {
        height: 48px !important; // 覆盖之前的样式，保持可点击性
        min-height: 48px;
        border-radius: 8px !important;

        :global(.anticon) {
            font-size: 18px !important; // 保持图标可见性
        }
    }

    .panel_title {
        font-size: 16px !important;
    }
}

// 超小屏幕优化
@media (max-width: 360px) {
    .share_options {
        :global(.ant-col) {
            padding: 3px;
        }
    }

    .share_button {
        height: 44px !important;
        min-height: 44px;

        :global(.anticon) {
            font-size: 16px !important;
        }
    }

    .share_button_text {
        font-size: 9px !important;
    }
}

// 无障碍访问优化
@media (prefers-reduced-motion: reduce) {
    .share_panel_overlay,
    .share_panel,
    .share_button,
    .close_button {
        animation: none;
        transition: none;
    }
}

// 高对比度模式支持
@media (prefers-contrast: high) {
    .share_panel {
        border: 2px solid var(--text-primary);
    }

    .share_button {
        border: 2px solid var(--border-color);

        &:hover,
        &:focus {
            border: 2px solid var(--text-primary);
        }
    }
}

// 深色主题适配
@media (prefers-color-scheme: dark) {
    .share_panel_overlay {
        background: rgba(0, 0, 0, 0.8);
    }
}

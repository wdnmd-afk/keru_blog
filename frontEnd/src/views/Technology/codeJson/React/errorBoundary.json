{
  "basicUsage": {
    "title": "ErrorBoundary åŸºæœ¬ç”¨æ³•",
    "language": "javascript",
    "code": "import React from 'react';\n\nclass ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { hasError: false, error: null, errorInfo: null };\n  }\n\n  static getDerivedStateFromError(error) {\n    // æ›´æ–° state ä½¿ä¸‹ä¸€æ¬¡æ¸²æŸ“èƒ½å¤Ÿæ˜¾ç¤ºé™çº§åçš„ UI\n    return { hasError: true };\n  }\n\n  componentDidCatch(error, errorInfo) {\n    // ä½ åŒæ ·å¯ä»¥å°†é”™è¯¯æ—¥å¿—ä¸ŠæŠ¥ç»™æœåŠ¡å™¨\n    console.error('ErrorBoundary caught an error:', error, errorInfo);\n    \n    this.setState({\n      error: error,\n      errorInfo: errorInfo\n    });\n    \n    // å¯ä»¥å°†é”™è¯¯ä¸ŠæŠ¥åˆ°é”™è¯¯ç›‘æ§æœåŠ¡\n    // logErrorToService(error, errorInfo);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      // ä½ å¯ä»¥è‡ªå®šä¹‰é™çº§åçš„ UI å¹¶æ¸²æŸ“\n      return (\n        <div style={{ padding: '20px', border: '1px solid #ff6b6b', borderRadius: '8px', backgroundColor: '#ffe0e0' }}>\n          <h2>ğŸ˜µ å‡ºé”™äº†!</h2>\n          <p>å¾ˆæŠ±æ­‰ï¼Œåº”ç”¨é‡åˆ°äº†ä¸€ä¸ªé”™è¯¯ã€‚</p>\n          <details style={{ whiteSpace: 'pre-wrap', marginTop: '10px' }}>\n            <summary>é”™è¯¯è¯¦æƒ… (ç‚¹å‡»æŸ¥çœ‹)</summary>\n            <p><strong>é”™è¯¯:</strong> {this.state.error && this.state.error.toString()}</p>\n            <p><strong>é”™è¯¯å †æ ˆ:</strong></p>\n            <pre>{this.state.errorInfo.componentStack}</pre>\n          </details>\n          <button \n            onClick={() => window.location.reload()}\n            style={{ marginTop: '10px', padding: '8px 16px', backgroundColor: '#ff6b6b', color: 'white', border: 'none', borderRadius: '4px' }}\n          >\n            åˆ·æ–°é¡µé¢\n          </button>\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\n// ä½¿ç”¨ç¤ºä¾‹\nconst App = () => {\n  return (\n    <ErrorBoundary>\n      <Header />\n      <MainContent />\n      <Footer />\n    </ErrorBoundary>\n  );\n};\n\n// å¯èƒ½å‡ºé”™çš„ç»„ä»¶\nconst ProblematicComponent = ({ shouldThrow }) => {\n  if (shouldThrow) {\n    throw new Error('è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•é”™è¯¯!');\n  }\n  \n  return <div>ä¸€åˆ‡æ­£å¸¸!</div>;\n};\n\nexport default ErrorBoundary;"
  },
  "hookVersion": {
    "title": "ä½¿ç”¨Hookå®ç°ErrorBoundary",
    "language": "javascript",
    "code": "import React, { useState, useEffect } from 'react';\n\n// è‡ªå®šä¹‰Hookç”¨äºé”™è¯¯å¤„ç†\nconst useErrorHandler = () => {\n  const [error, setError] = useState(null);\n  \n  const resetError = () => setError(null);\n  \n  const captureError = (error, errorInfo) => {\n    setError({ error, errorInfo });\n    console.error('Error captured:', error, errorInfo);\n  };\n  \n  return { error, resetError, captureError };\n};\n\n// å‡½æ•°å¼ErrorBoundaryç»„ä»¶\nconst FunctionalErrorBoundary = ({ children, fallback }) => {\n  const { error, resetError, captureError } = useErrorHandler();\n  \n  useEffect(() => {\n    const handleError = (event) => {\n      captureError(event.error, { componentStack: event.error.stack });\n    };\n    \n    const handleUnhandledRejection = (event) => {\n      captureError(event.reason, { componentStack: 'Promise rejection' });\n    };\n    \n    window.addEventListener('error', handleError);\n    window.addEventListener('unhandledrejection', handleUnhandledRejection);\n    \n    return () => {\n      window.removeEventListener('error', handleError);\n      window.removeEventListener('unhandledrejection', handleUnhandledRejection);\n    };\n  }, [captureError]);\n  \n  if (error) {\n    return fallback ? fallback(error, resetError) : (\n      <div style={{ padding: '20px', border: '1px solid #ff6b6b', borderRadius: '8px', backgroundColor: '#ffe0e0' }}>\n        <h2>ğŸš¨ åº”ç”¨å‡ºé”™äº†</h2>\n        <p>é”™è¯¯ä¿¡æ¯: {error.error?.message}</p>\n        <button \n          onClick={resetError}\n          style={{ padding: '8px 16px', backgroundColor: '#4CAF50', color: 'white', border: 'none', borderRadius: '4px' }}\n        >\n          é‡è¯•\n        </button>\n      </div>\n    );\n  }\n  \n  return children;\n};\n\n// ä½¿ç”¨ç¤ºä¾‹\nconst AppWithHookErrorBoundary = () => {\n  return (\n    <FunctionalErrorBoundary\n      fallback={(error, resetError) => (\n        <div style={{ textAlign: 'center', padding: '40px' }}>\n          <h1>ğŸ˜µ å“å‘€ï¼Œå‡ºé”™äº†!</h1>\n          <p>é”™è¯¯: {error.error?.message}</p>\n          <button onClick={resetError}>é‡æ–°å°è¯•</button>\n        </div>\n      )}\n    >\n      <MyApp />\n    </FunctionalErrorBoundary>\n  );\n};\n\n// é”™è¯¯è¾¹ç•ŒHook\nconst useErrorBoundary = () => {\n  const [error, setError] = useState(null);\n  \n  const captureError = useCallback((error) => {\n    setError(error);\n  }, []);\n  \n  const resetError = useCallback(() => {\n    setError(null);\n  }, []);\n  \n  useEffect(() => {\n    if (error) {\n      throw error;\n    }\n  }, [error]);\n  \n  return { captureError, resetError };\n};\n\n// åœ¨ç»„ä»¶ä¸­ä½¿ç”¨\nconst MyComponent = () => {\n  const { captureError } = useErrorBoundary();\n  \n  const handleAsyncError = async () => {\n    try {\n      await someAsyncOperation();\n    } catch (error) {\n      captureError(error);\n    }\n  };\n  \n  return (\n    <button onClick={handleAsyncError}>\n      æ‰§è¡Œå¯èƒ½å‡ºé”™çš„æ“ä½œ\n    </button>\n  );\n};\n\nconst someAsyncOperation = () => {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      reject(new Error('å¼‚æ­¥æ“ä½œå¤±è´¥'));\n    }, 1000);\n  });\n};\n\nconst MyApp = () => {\n  return (\n    <div>\n      <h1>æˆ‘çš„åº”ç”¨</h1>\n      <MyComponent />\n    </div>\n  );\n};\n\nexport { FunctionalErrorBoundary, useErrorBoundary };"
  },
  "advancedFeatures": {
    "title": "é«˜çº§ç‰¹æ€§å’Œæœ€ä½³å®è·µ",
    "language": "javascript",
    "code": "import React, { Component } from 'react';\n\n// é«˜çº§ErrorBoundary with é”™è¯¯ä¸ŠæŠ¥\nclass AdvancedErrorBoundary extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hasError: false,\n      error: null,\n      errorInfo: null,\n      eventId: null\n    };\n  }\n\n  static getDerivedStateFromError(error) {\n    return { hasError: true };\n  }\n\n  componentDidCatch(error, errorInfo) {\n    // é”™è¯¯ä¸ŠæŠ¥åˆ°ç›‘æ§æœåŠ¡\n    const eventId = this.logErrorToService(error, errorInfo);\n    \n    this.setState({\n      error,\n      errorInfo,\n      eventId\n    });\n  }\n\n  logErrorToService = (error, errorInfo) => {\n    // æ¨¡æ‹Ÿé”™è¯¯ä¸ŠæŠ¥æœåŠ¡\n    const errorData = {\n      message: error.message,\n      stack: error.stack,\n      componentStack: errorInfo.componentStack,\n      timestamp: new Date().toISOString(),\n      userAgent: navigator.userAgent,\n      url: window.location.href,\n      userId: this.props.userId || 'anonymous'\n    };\n    \n    console.log('ä¸ŠæŠ¥é”™è¯¯åˆ°æœåŠ¡:', errorData);\n    \n    // å®é™…é¡¹ç›®ä¸­å¯èƒ½æ˜¯è¿™æ ·:\n    // return Sentry.captureException(error, { contexts: { react: errorInfo } });\n    // æˆ–è€…:\n    // return fetch('/api/errors', {\n    //   method: 'POST',\n    //   headers: { 'Content-Type': 'application/json' },\n    //   body: JSON.stringify(errorData)\n    // });\n    \n    return `error-${Date.now()}`;\n  };\n\n  handleRetry = () => {\n    this.setState({\n      hasError: false,\n      error: null,\n      errorInfo: null,\n      eventId: null\n    });\n  };\n\n  render() {\n    if (this.state.hasError) {\n      const { fallback: Fallback } = this.props;\n      \n      if (Fallback) {\n        return (\n          <Fallback \n            error={this.state.error}\n            errorInfo={this.state.errorInfo}\n            eventId={this.state.eventId}\n            onRetry={this.handleRetry}\n          />\n        );\n      }\n      \n      return (\n        <div className=\"error-boundary\">\n          <div className=\"error-content\">\n            <h1>ğŸš¨ åº”ç”¨é‡åˆ°é”™è¯¯</h1>\n            <p>å¾ˆæŠ±æ­‰ï¼Œåº”ç”¨é‡åˆ°äº†ä¸€ä¸ªæ„å¤–é”™è¯¯ã€‚</p>\n            \n            {this.state.eventId && (\n              <p>é”™è¯¯ID: <code>{this.state.eventId}</code></p>\n            )}\n            \n            <div className=\"error-actions\">\n              <button onClick={this.handleRetry} className=\"retry-btn\">\n                é‡è¯•\n              </button>\n              <button \n                onClick={() => window.location.reload()} \n                className=\"reload-btn\"\n              >\n                åˆ·æ–°é¡µé¢\n              </button>\n            </div>\n            \n            {process.env.NODE_ENV === 'development' && (\n              <details className=\"error-details\">\n                <summary>å¼€å‘è€…ä¿¡æ¯</summary>\n                <pre>{this.state.error?.stack}</pre>\n                <pre>{this.state.errorInfo?.componentStack}</pre>\n              </details>\n            )}\n          </div>\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\n// è‡ªå®šä¹‰é”™è¯¯é¡µé¢ç»„ä»¶\nconst CustomErrorFallback = ({ error, errorInfo, eventId, onRetry }) => {\n  return (\n    <div style={{\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      justifyContent: 'center',\n      minHeight: '400px',\n      padding: '20px',\n      textAlign: 'center'\n    }}>\n      <div style={{ fontSize: '64px', marginBottom: '20px' }}>ğŸ˜µ</div>\n      <h1>å‡ºäº†ç‚¹é—®é¢˜</h1>\n      <p>æˆ‘ä»¬å·²ç»è®°å½•äº†è¿™ä¸ªé”™è¯¯ï¼Œæ­£åœ¨åŠªåŠ›ä¿®å¤ã€‚</p>\n      \n      {eventId && (\n        <p style={{ color: '#666', fontSize: '14px' }}>\n          é”™è¯¯è¿½è¸ªID: {eventId}\n        </p>\n      )}\n      \n      <div style={{ marginTop: '20px' }}>\n        <button \n          onClick={onRetry}\n          style={{\n            padding: '10px 20px',\n            marginRight: '10px',\n            backgroundColor: '#4CAF50',\n            color: 'white',\n            border: 'none',\n            borderRadius: '4px',\n            cursor: 'pointer'\n          }}\n        >\n          é‡è¯•\n        </button>\n        <button \n          onClick={() => window.location.href = '/'}\n          style={{\n            padding: '10px 20px',\n            backgroundColor: '#2196F3',\n            color: 'white',\n            border: 'none',\n            borderRadius: '4px',\n            cursor: 'pointer'\n          }}\n        >\n          è¿”å›é¦–é¡µ\n        </button>\n      </div>\n    </div>\n  );\n};\n\n// å¤šå±‚é”™è¯¯è¾¹ç•Œ\nconst AppWithMultipleErrorBoundaries = () => {\n  return (\n    <AdvancedErrorBoundary fallback={CustomErrorFallback}>\n      <Header />\n      \n      <AdvancedErrorBoundary fallback={({ error, onRetry }) => (\n        <div style={{ padding: '20px', backgroundColor: '#fff3cd', border: '1px solid #ffeaa7' }}>\n          <p>ä¾§è¾¹æ åŠ è½½å¤±è´¥: {error.message}</p>\n          <button onClick={onRetry}>é‡æ–°åŠ è½½ä¾§è¾¹æ </button>\n        </div>\n      )}>\n        <Sidebar />\n      </AdvancedErrorBoundary>\n      \n      <AdvancedErrorBoundary fallback={({ error, onRetry }) => (\n        <div style={{ padding: '20px', backgroundColor: '#f8d7da', border: '1px solid #f5c6cb' }}>\n          <p>ä¸»è¦å†…å®¹åŠ è½½å¤±è´¥: {error.message}</p>\n          <button onClick={onRetry}>é‡æ–°åŠ è½½å†…å®¹</button>\n        </div>\n      )}>\n        <MainContent />\n      </AdvancedErrorBoundary>\n      \n      <Footer />\n    </AdvancedErrorBoundary>\n  );\n};\n\n// é”™è¯¯è¾¹ç•ŒHOC\nconst withErrorBoundary = (Component, fallback) => {\n  return function WrappedComponent(props) {\n    return (\n      <AdvancedErrorBoundary fallback={fallback}>\n        <Component {...props} />\n      </AdvancedErrorBoundary>\n    );\n  };\n};\n\n// ä½¿ç”¨HOC\nconst SafeComponent = withErrorBoundary(MyComponent, ({ error, onRetry }) => (\n  <div>\n    <p>ç»„ä»¶åŠ è½½å¤±è´¥: {error.message}</p>\n    <button onClick={onRetry}>é‡è¯•</button>\n  </div>\n));\n\n// æ¨¡æ‹Ÿç»„ä»¶\nconst Header = () => <header>Header</header>;\nconst Sidebar = () => <aside>Sidebar</aside>;\nconst MainContent = () => <main>Main Content</main>;\nconst Footer = () => <footer>Footer</footer>;\nconst MyComponent = () => <div>My Component</div>;\n\nexport { AdvancedErrorBoundary, CustomErrorFallback, withErrorBoundary };"
  }
}

{
  "basicUsage": {
    "title": "useContext åŸºæœ¬ç”¨æ³•",
    "language": "javascript",
    "code": "import React, { createContext, useContext, useState } from 'react';\n\n// 1. åˆ›å»º Context\nconst ThemeContext = createContext();\n\n// 2. åˆ›å»º Provider ç»„ä»¶\nconst ThemeProvider = ({ children }) => {\n  const [theme, setTheme] = useState('light');\n  const [fontSize, setFontSize] = useState(16);\n  \n  const toggleTheme = () => {\n    setTheme(prevTheme => prevTheme === 'light' ? 'dark' : 'light');\n  };\n  \n  const increaseFontSize = () => {\n    setFontSize(prevSize => Math.min(prevSize + 2, 24));\n  };\n  \n  const decreaseFontSize = () => {\n    setFontSize(prevSize => Math.max(prevSize - 2, 12));\n  };\n  \n  const value = {\n    theme,\n    fontSize,\n    toggleTheme,\n    increaseFontSize,\n    decreaseFontSize\n  };\n  \n  return (\n    <ThemeContext.Provider value={value}>\n      {children}\n    </ThemeContext.Provider>\n  );\n};\n\n// 3. åˆ›å»ºè‡ªå®šä¹‰ Hook\nconst useTheme = () => {\n  const context = useContext(ThemeContext);\n  if (!context) {\n    throw new Error('useTheme must be used within a ThemeProvider');\n  }\n  return context;\n};\n\n// 4. ä½¿ç”¨ Context çš„ç»„ä»¶\nconst Header = () => {\n  const { theme, toggleTheme } = useTheme();\n  \n  return (\n    <header style={{\n      padding: '16px',\n      backgroundColor: theme === 'light' ? '#f5f5f5' : '#333',\n      color: theme === 'light' ? '#333' : '#f5f5f5',\n      borderBottom: `1px solid ${theme === 'light' ? '#ddd' : '#555'}`\n    }}>\n      <h2>æˆ‘çš„åº”ç”¨</h2>\n      <button \n        onClick={toggleTheme}\n        style={{\n          padding: '8px 16px',\n          backgroundColor: theme === 'light' ? '#2196F3' : '#ff9800',\n          color: 'white',\n          border: 'none',\n          borderRadius: '4px',\n          cursor: 'pointer'\n        }}\n      >\n        åˆ‡æ¢åˆ° {theme === 'light' ? 'æ·±è‰²' : 'æµ…è‰²'} ä¸»é¢˜\n      </button>\n    </header>\n  );\n};\n\nconst Content = () => {\n  const { theme, fontSize } = useTheme();\n  \n  return (\n    <main style={{\n      padding: '24px',\n      backgroundColor: theme === 'light' ? 'white' : '#222',\n      color: theme === 'light' ? '#333' : '#f5f5f5',\n      fontSize: `${fontSize}px`,\n      minHeight: '300px'\n    }}>\n      <h3>ä¸»è¦å†…å®¹</h3>\n      <p>è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨ useContext çš„ç¤ºä¾‹åº”ç”¨ã€‚</p>\n      <p>å½“å‰ä¸»é¢˜: <strong>{theme === 'light' ? 'æµ…è‰²' : 'æ·±è‰²'}</strong></p>\n      <p>å½“å‰å­—ä½“å¤§å°: <strong>{fontSize}px</strong></p>\n      \n      <NestedComponent />\n    </main>\n  );\n};\n\nconst NestedComponent = () => {\n  const { theme } = useTheme();\n  \n  return (\n    <div style={{\n      padding: '16px',\n      margin: '16px 0',\n      border: `2px solid ${theme === 'light' ? '#ddd' : '#555'}`,\n      borderRadius: '8px'\n    }}>\n      <h4>åµŒå¥—ç»„ä»¶</h4>\n      <p>è¿™ä¸ªç»„ä»¶ä¹Ÿå¯ä»¥ç›´æ¥è®¿é—® Contextï¼Œæ— éœ€é€šè¿‡ props ä¼ é€’ã€‚</p>\n      <DeeplyNestedComponent />\n    </div>\n  );\n};\n\nconst DeeplyNestedComponent = () => {\n  const { fontSize, increaseFontSize, decreaseFontSize } = useTheme();\n  \n  return (\n    <div style={{\n      padding: '12px',\n      backgroundColor: 'rgba(0, 123, 255, 0.1)',\n      borderRadius: '4px'\n    }}>\n      <h5>æ·±åº¦åµŒå¥—ç»„ä»¶</h5>\n      <p>å³ä½¿åœ¨æ·±åº¦åµŒå¥—çš„ç»„ä»¶ä¸­ï¼Œä¹Ÿèƒ½è½»æ¾è®¿é—® Contextã€‚</p>\n      \n      <div style={{ marginTop: '12px' }}>\n        <button \n          onClick={decreaseFontSize}\n          disabled={fontSize <= 12}\n          style={{\n            padding: '6px 12px',\n            marginRight: '8px',\n            backgroundColor: fontSize <= 12 ? '#ccc' : '#f44336',\n            color: 'white',\n            border: 'none',\n            borderRadius: '4px',\n            cursor: fontSize <= 12 ? 'not-allowed' : 'pointer'\n          }}\n        >\n          å­—ä½“ -\n        </button>\n        \n        <button \n          onClick={increaseFontSize}\n          disabled={fontSize >= 24}\n          style={{\n            padding: '6px 12px',\n            backgroundColor: fontSize >= 24 ? '#ccc' : '#4CAF50',\n            color: 'white',\n            border: 'none',\n            borderRadius: '4px',\n            cursor: fontSize >= 24 ? 'not-allowed' : 'pointer'\n          }}\n        >\n          å­—ä½“ +\n        </button>\n      </div>\n    </div>\n  );\n};\n\n// 5. ä¸»åº”ç”¨ç»„ä»¶\nconst BasicContextApp = () => {\n  return (\n    <ThemeProvider>\n      <div>\n        <h3>useContext åŸºæœ¬ç”¨æ³•ç¤ºä¾‹</h3>\n        <Header />\n        <Content />\n      </div>\n    </ThemeProvider>\n  );\n};\n\nexport default BasicContextApp;"
  },
  "multipleContexts": {
    "title": "å¤šä¸ª Context çš„ä½¿ç”¨",
    "language": "javascript",
    "code": "import React, { createContext, useContext, useState, useReducer } from 'react';\n\n// ç”¨æˆ· Context\nconst UserContext = createContext();\n\nconst UserProvider = ({ children }) => {\n  const [user, setUser] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  \n  const login = async (username, password) => {\n    setIsLoading(true);\n    // æ¨¡æ‹Ÿ API è°ƒç”¨\n    setTimeout(() => {\n      setUser({\n        id: 1,\n        username,\n        email: `${username}@example.com`,\n        avatar: 'ğŸ‘¤',\n        role: 'user'\n      });\n      setIsLoading(false);\n    }, 1000);\n  };\n  \n  const logout = () => {\n    setUser(null);\n  };\n  \n  return (\n    <UserContext.Provider value={{ user, isLoading, login, logout }}>\n      {children}\n    </UserContext.Provider>\n  );\n};\n\nconst useUser = () => {\n  const context = useContext(UserContext);\n  if (!context) {\n    throw new Error('useUser must be used within UserProvider');\n  }\n  return context;\n};\n\n// è´­ç‰©è½¦ Context\nconst CartContext = createContext();\n\nconst cartReducer = (state, action) => {\n  switch (action.type) {\n    case 'ADD_ITEM':\n      const existingItem = state.items.find(item => item.id === action.payload.id);\n      if (existingItem) {\n        return {\n          ...state,\n          items: state.items.map(item =>\n            item.id === action.payload.id\n              ? { ...item, quantity: item.quantity + 1 }\n              : item\n          )\n        };\n      }\n      return {\n        ...state,\n        items: [...state.items, { ...action.payload, quantity: 1 }]\n      };\n      \n    case 'REMOVE_ITEM':\n      return {\n        ...state,\n        items: state.items.filter(item => item.id !== action.payload.id)\n      };\n      \n    case 'UPDATE_QUANTITY':\n      return {\n        ...state,\n        items: state.items.map(item =>\n          item.id === action.payload.id\n            ? { ...item, quantity: Math.max(0, action.payload.quantity) }\n            : item\n        ).filter(item => item.quantity > 0)\n      };\n      \n    case 'CLEAR_CART':\n      return { ...state, items: [] };\n      \n    default:\n      return state;\n  }\n};\n\nconst CartProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(cartReducer, { items: [] });\n  \n  const addItem = (item) => {\n    dispatch({ type: 'ADD_ITEM', payload: item });\n  };\n  \n  const removeItem = (id) => {\n    dispatch({ type: 'REMOVE_ITEM', payload: { id } });\n  };\n  \n  const updateQuantity = (id, quantity) => {\n    dispatch({ type: 'UPDATE_QUANTITY', payload: { id, quantity } });\n  };\n  \n  const clearCart = () => {\n    dispatch({ type: 'CLEAR_CART' });\n  };\n  \n  const totalItems = state.items.reduce((sum, item) => sum + item.quantity, 0);\n  const totalPrice = state.items.reduce((sum, item) => sum + (item.price * item.quantity), 0);\n  \n  return (\n    <CartContext.Provider value={{\n      items: state.items,\n      totalItems,\n      totalPrice,\n      addItem,\n      removeItem,\n      updateQuantity,\n      clearCart\n    }}>\n      {children}\n    </CartContext.Provider>\n  );\n};\n\nconst useCart = () => {\n  const context = useContext(CartContext);\n  if (!context) {\n    throw new Error('useCart must be used within CartProvider');\n  }\n  return context;\n};\n\n// é€šçŸ¥ Context\nconst NotificationContext = createContext();\n\nconst NotificationProvider = ({ children }) => {\n  const [notifications, setNotifications] = useState([]);\n  \n  const addNotification = (message, type = 'info', duration = 3000) => {\n    const id = Date.now();\n    const notification = { id, message, type };\n    \n    setNotifications(prev => [...prev, notification]);\n    \n    if (duration > 0) {\n      setTimeout(() => {\n        removeNotification(id);\n      }, duration);\n    }\n  };\n  \n  const removeNotification = (id) => {\n    setNotifications(prev => prev.filter(n => n.id !== id));\n  };\n  \n  return (\n    <NotificationContext.Provider value={{ notifications, addNotification, removeNotification }}>\n      {children}\n    </NotificationContext.Provider>\n  );\n};\n\nconst useNotification = () => {\n  const context = useContext(NotificationContext);\n  if (!context) {\n    throw new Error('useNotification must be used within NotificationProvider');\n  }\n  return context;\n};\n\n// ç»„åˆæ‰€æœ‰ Provider\nconst AppProviders = ({ children }) => {\n  return (\n    <UserProvider>\n      <CartProvider>\n        <NotificationProvider>\n          {children}\n        </NotificationProvider>\n      </CartProvider>\n    </UserProvider>\n  );\n};\n\n// ä½¿ç”¨å¤šä¸ª Context çš„ç»„ä»¶\nconst UserInfo = () => {\n  const { user, isLoading, login, logout } = useUser();\n  const { addNotification } = useNotification();\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  \n  const handleLogin = async (e) => {\n    e.preventDefault();\n    if (username && password) {\n      await login(username, password);\n      addNotification('ç™»å½•æˆåŠŸï¼', 'success');\n    } else {\n      addNotification('è¯·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ', 'error');\n    }\n  };\n  \n  const handleLogout = () => {\n    logout();\n    addNotification('å·²é€€å‡ºç™»å½•', 'info');\n  };\n  \n  if (isLoading) {\n    return <div style={{ padding: '16px' }}>ç™»å½•ä¸­...</div>;\n  }\n  \n  return (\n    <div style={{ padding: '16px', border: '1px solid #ccc', borderRadius: '8px', marginBottom: '16px' }}>\n      <h4>ç”¨æˆ·ä¿¡æ¯</h4>\n      {user ? (\n        <div>\n          <p>{user.avatar} {user.username}</p>\n          <p>ğŸ“§ {user.email}</p>\n          <p>ğŸ·ï¸ {user.role}</p>\n          <button \n            onClick={handleLogout}\n            style={{ padding: '8px 16px', backgroundColor: '#f44336', color: 'white', border: 'none', borderRadius: '4px' }}\n          >\n            é€€å‡ºç™»å½•\n          </button>\n        </div>\n      ) : (\n        <form onSubmit={handleLogin}>\n          <div style={{ marginBottom: '8px' }}>\n            <input\n              type=\"text\"\n              value={username}\n              onChange={(e) => setUsername(e.target.value)}\n              placeholder=\"ç”¨æˆ·å\"\n              style={{ padding: '8px', marginRight: '8px', border: '1px solid #ccc', borderRadius: '4px' }}\n            />\n          </div>\n          <div style={{ marginBottom: '8px' }}>\n            <input\n              type=\"password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              placeholder=\"å¯†ç \"\n              style={{ padding: '8px', marginRight: '8px', border: '1px solid #ccc', borderRadius: '4px' }}\n            />\n          </div>\n          <button \n            type=\"submit\"\n            style={{ padding: '8px 16px', backgroundColor: '#4CAF50', color: 'white', border: 'none', borderRadius: '4px' }}\n          >\n            ç™»å½•\n          </button>\n        </form>\n      )}\n    </div>\n  );\n};\n\nconst ProductList = () => {\n  const { addItem } = useCart();\n  const { addNotification } = useNotification();\n  \n  const products = [\n    { id: 1, name: 'iPhone 14', price: 5999, emoji: 'ğŸ“±' },\n    { id: 2, name: 'MacBook Pro', price: 12999, emoji: 'ğŸ’»' },\n    { id: 3, name: 'AirPods', price: 1299, emoji: 'ğŸ§' },\n    { id: 4, name: 'iPad', price: 3999, emoji: 'ğŸ“±' }\n  ];\n  \n  const handleAddToCart = (product) => {\n    addItem(product);\n    addNotification(`${product.name} å·²æ·»åŠ åˆ°è´­ç‰©è½¦`, 'success');\n  };\n  \n  return (\n    <div style={{ padding: '16px', border: '1px solid #ccc', borderRadius: '8px', marginBottom: '16px' }}>\n      <h4>å•†å“åˆ—è¡¨</h4>\n      <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))', gap: '16px' }}>\n        {products.map(product => (\n          <div key={product.id} style={{ padding: '16px', border: '1px solid #eee', borderRadius: '8px', textAlign: 'center' }}>\n            <div style={{ fontSize: '48px', marginBottom: '8px' }}>{product.emoji}</div>\n            <h5>{product.name}</h5>\n            <p style={{ color: '#f44336', fontWeight: 'bold' }}>Â¥{product.price}</p>\n            <button\n              onClick={() => handleAddToCart(product)}\n              style={{\n                padding: '8px 16px',\n                backgroundColor: '#2196F3',\n                color: 'white',\n                border: 'none',\n                borderRadius: '4px',\n                cursor: 'pointer'\n              }}\n            >\n              åŠ å…¥è´­ç‰©è½¦\n            </button>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nconst ShoppingCart = () => {\n  const { items, totalItems, totalPrice, updateQuantity, removeItem, clearCart } = useCart();\n  const { addNotification } = useNotification();\n  \n  const handleClearCart = () => {\n    clearCart();\n    addNotification('è´­ç‰©è½¦å·²æ¸…ç©º', 'info');\n  };\n  \n  return (\n    <div style={{ padding: '16px', border: '1px solid #ccc', borderRadius: '8px', marginBottom: '16px' }}>\n      <h4>è´­ç‰©è½¦ ({totalItems} ä»¶å•†å“)</h4>\n      \n      {items.length === 0 ? (\n        <p>è´­ç‰©è½¦ä¸ºç©º</p>\n      ) : (\n        <>\n          <div style={{ marginBottom: '16px' }}>\n            {items.map(item => (\n              <div key={item.id} style={{ \n                display: 'flex', \n                justifyContent: 'space-between', \n                alignItems: 'center',\n                padding: '8px',\n                border: '1px solid #eee',\n                borderRadius: '4px',\n                marginBottom: '8px'\n              }}>\n                <div>\n                  <span>{item.emoji} {item.name}</span>\n                  <span style={{ color: '#666', marginLeft: '8px' }}>Â¥{item.price}</span>\n                </div>\n                \n                <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n                  <button\n                    onClick={() => updateQuantity(item.id, item.quantity - 1)}\n                    style={{ padding: '4px 8px', border: '1px solid #ccc', borderRadius: '4px' }}\n                  >\n                    -\n                  </button>\n                  <span>{item.quantity}</span>\n                  <button\n                    onClick={() => updateQuantity(item.id, item.quantity + 1)}\n                    style={{ padding: '4px 8px', border: '1px solid #ccc', borderRadius: '4px' }}\n                  >\n                    +\n                  </button>\n                  <button\n                    onClick={() => removeItem(item.id)}\n                    style={{ padding: '4px 8px', backgroundColor: '#f44336', color: 'white', border: 'none', borderRadius: '4px' }}\n                  >\n                    åˆ é™¤\n                  </button>\n                </div>\n              </div>\n            ))}\n          </div>\n          \n          <div style={{ borderTop: '1px solid #eee', paddingTop: '16px' }}>\n            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n              <strong>æ€»è®¡: Â¥{totalPrice.toFixed(2)}</strong>\n              <div>\n                <button\n                  onClick={handleClearCart}\n                  style={{ padding: '8px 16px', backgroundColor: '#ff9800', color: 'white', border: 'none', borderRadius: '4px', marginRight: '8px' }}\n                >\n                  æ¸…ç©ºè´­ç‰©è½¦\n                </button>\n                <button\n                  style={{ padding: '8px 16px', backgroundColor: '#4CAF50', color: 'white', border: 'none', borderRadius: '4px' }}\n                >\n                  ç»“ç®—\n                </button>\n              </div>\n            </div>\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n\nconst NotificationList = () => {\n  const { notifications, removeNotification } = useNotification();\n  \n  if (notifications.length === 0) return null;\n  \n  return (\n    <div style={{ position: 'fixed', top: '16px', right: '16px', zIndex: 1000 }}>\n      {notifications.map(notification => (\n        <div\n          key={notification.id}\n          style={{\n            padding: '12px 16px',\n            marginBottom: '8px',\n            borderRadius: '4px',\n            backgroundColor: \n              notification.type === 'success' ? '#4CAF50' :\n              notification.type === 'error' ? '#f44336' :\n              notification.type === 'warning' ? '#ff9800' : '#2196F3',\n            color: 'white',\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'center',\n            minWidth: '300px',\n            boxShadow: '0 2px 8px rgba(0,0,0,0.1)'\n          }}\n        >\n          <span>{notification.message}</span>\n          <button\n            onClick={() => removeNotification(notification.id)}\n            style={{\n              background: 'none',\n              border: 'none',\n              color: 'white',\n              cursor: 'pointer',\n              fontSize: '16px',\n              padding: '0 4px'\n            }}\n          >\n            Ã—\n          </button>\n        </div>\n      ))}\n    </div>\n  );\n};\n\n// ä¸»åº”ç”¨ç»„ä»¶\nconst MultipleContextsApp = () => {\n  return (\n    <AppProviders>\n      <div>\n        <h3>å¤šä¸ª Context ä½¿ç”¨ç¤ºä¾‹</h3>\n        <UserInfo />\n        <ProductList />\n        <ShoppingCart />\n        <NotificationList />\n      </div>\n    </AppProviders>\n  );\n};\n\nexport default MultipleContextsApp;"
  },
  "performanceOptimization": {
    "title": "æ€§èƒ½ä¼˜åŒ–æŠ€å·§",
    "language": "javascript",
    "code": "import React, { createContext, useContext, useState, useMemo, useCallback, memo } from 'react';\n\n// 1. åˆ†ç¦»ä¸åŒæ›´æ–°é¢‘ç‡çš„ Context\n\n// ç”¨æˆ·ä¿¡æ¯ Context (æ›´æ–°é¢‘ç‡ä½)\nconst UserContext = createContext();\n\n// UI çŠ¶æ€ Context (æ›´æ–°é¢‘ç‡é«˜)\nconst UIContext = createContext();\n\nconst UserProvider = ({ children }) => {\n  const [user, setUser] = useState({\n    id: 1,\n    name: 'å¼ ä¸‰',\n    email: 'zhangsan@example.com'\n  });\n  \n  // ä½¿ç”¨ useMemo ç¼“å­˜ context value\n  const value = useMemo(() => ({\n    user,\n    setUser\n  }), [user]);\n  \n  return (\n    <UserContext.Provider value={value}>\n      {children}\n    </UserContext.Provider>\n  );\n};\n\nconst UIProvider = ({ children }) => {\n  const [theme, setTheme] = useState('light');\n  const [sidebarOpen, setSidebarOpen] = useState(true);\n  const [notifications, setNotifications] = useState([]);\n  \n  // ä½¿ç”¨ useCallback ç¼“å­˜å‡½æ•°\n  const toggleTheme = useCallback(() => {\n    setTheme(prev => prev === 'light' ? 'dark' : 'light');\n  }, []);\n  \n  const toggleSidebar = useCallback(() => {\n    setSidebarOpen(prev => !prev);\n  }, []);\n  \n  const addNotification = useCallback((message) => {\n    const id = Date.now();\n    setNotifications(prev => [...prev, { id, message }]);\n    \n    // 3ç§’åè‡ªåŠ¨ç§»é™¤\n    setTimeout(() => {\n      setNotifications(prev => prev.filter(n => n.id !== id));\n    }, 3000);\n  }, []);\n  \n  // åˆ†åˆ«ç¼“å­˜ä¸åŒçš„ value å¯¹è±¡\n  const themeValue = useMemo(() => ({\n    theme,\n    toggleTheme\n  }), [theme, toggleTheme]);\n  \n  const sidebarValue = useMemo(() => ({\n    sidebarOpen,\n    toggleSidebar\n  }), [sidebarOpen, toggleSidebar]);\n  \n  const notificationValue = useMemo(() => ({\n    notifications,\n    addNotification\n  }), [notifications, addNotification]);\n  \n  const value = useMemo(() => ({\n    ...themeValue,\n    ...sidebarValue,\n    ...notificationValue\n  }), [themeValue, sidebarValue, notificationValue]);\n  \n  return (\n    <UIContext.Provider value={value}>\n      {children}\n    </UIContext.Provider>\n  );\n};\n\n// 2. åˆ›å»ºé€‰æ‹©æ€§è®¢é˜…çš„ Hook\nconst useUser = () => {\n  const context = useContext(UserContext);\n  if (!context) {\n    throw new Error('useUser must be used within UserProvider');\n  }\n  return context;\n};\n\nconst useUI = () => {\n  const context = useContext(UIContext);\n  if (!context) {\n    throw new Error('useUI must be used within UIProvider');\n  }\n  return context;\n};\n\n// åªè®¢é˜…ä¸»é¢˜çš„ Hook\nconst useTheme = () => {\n  const { theme, toggleTheme } = useUI();\n  return { theme, toggleTheme };\n};\n\n// åªè®¢é˜…ä¾§è¾¹æ çš„ Hook\nconst useSidebar = () => {\n  const { sidebarOpen, toggleSidebar } = useUI();\n  return { sidebarOpen, toggleSidebar };\n};\n\n// åªè®¢é˜…é€šçŸ¥çš„ Hook\nconst useNotifications = () => {\n  const { notifications, addNotification } = useUI();\n  return { notifications, addNotification };\n};\n\n// 3. ä½¿ç”¨ memo ä¼˜åŒ–ç»„ä»¶\nconst UserProfile = memo(() => {\n  const { user, setUser } = useUser();\n  console.log('UserProfile æ¸²æŸ“');\n  \n  return (\n    <div style={{ padding: '16px', border: '1px solid #ccc', borderRadius: '8px', marginBottom: '16px' }}>\n      <h4>ç”¨æˆ·èµ„æ–™</h4>\n      <p>å§“å: {user.name}</p>\n      <p>é‚®ç®±: {user.email}</p>\n      <button\n        onClick={() => setUser(prev => ({ ...prev, name: prev.name + '!' }))}\n        style={{ padding: '8px 16px', backgroundColor: '#2196F3', color: 'white', border: 'none', borderRadius: '4px' }}\n      >\n        ä¿®æ”¹å§“å\n      </button>\n    </div>\n  );\n});\n\nconst ThemeToggle = memo(() => {\n  const { theme, toggleTheme } = useTheme();\n  console.log('ThemeToggle æ¸²æŸ“');\n  \n  return (\n    <div style={{ padding: '16px', border: '1px solid #ccc', borderRadius: '8px', marginBottom: '16px' }}>\n      <h4>ä¸»é¢˜åˆ‡æ¢</h4>\n      <p>å½“å‰ä¸»é¢˜: {theme}</p>\n      <button\n        onClick={toggleTheme}\n        style={{\n          padding: '8px 16px',\n          backgroundColor: theme === 'light' ? '#333' : '#fff',\n          color: theme === 'light' ? '#fff' : '#333',\n          border: 'none',\n          borderRadius: '4px'\n        }}\n      >\n        åˆ‡æ¢ä¸»é¢˜\n      </button>\n    </div>\n  );\n});\n\nconst SidebarToggle = memo(() => {\n  const { sidebarOpen, toggleSidebar } = useSidebar();\n  console.log('SidebarToggle æ¸²æŸ“');\n  \n  return (\n    <div style={{ padding: '16px', border: '1px solid #ccc', borderRadius: '8px', marginBottom: '16px' }}>\n      <h4>ä¾§è¾¹æ æ§åˆ¶</h4>\n      <p>ä¾§è¾¹æ çŠ¶æ€: {sidebarOpen ? 'æ‰“å¼€' : 'å…³é—­'}</p>\n      <button\n        onClick={toggleSidebar}\n        style={{\n          padding: '8px 16px',\n          backgroundColor: '#4CAF50',\n          color: 'white',\n          border: 'none',\n          borderRadius: '4px'\n        }}\n      >\n        {sidebarOpen ? 'å…³é—­' : 'æ‰“å¼€'} ä¾§è¾¹æ \n      </button>\n    </div>\n  );\n});\n\nconst NotificationPanel = memo(() => {\n  const { notifications, addNotification } = useNotifications();\n  console.log('NotificationPanel æ¸²æŸ“');\n  \n  return (\n    <div style={{ padding: '16px', border: '1px solid #ccc', borderRadius: '8px', marginBottom: '16px' }}>\n      <h4>é€šçŸ¥é¢æ¿</h4>\n      <p>é€šçŸ¥æ•°é‡: {notifications.length}</p>\n      <button\n        onClick={() => addNotification(`é€šçŸ¥ ${Date.now()}`)}\n        style={{\n          padding: '8px 16px',\n          backgroundColor: '#ff9800',\n          color: 'white',\n          border: 'none',\n          borderRadius: '4px'\n        }}\n      >\n        æ·»åŠ é€šçŸ¥\n      </button>\n      \n      <div style={{ marginTop: '12px' }}>\n        {notifications.map(notification => (\n          <div\n            key={notification.id}\n            style={{\n              padding: '8px',\n              margin: '4px 0',\n              backgroundColor: '#e3f2fd',\n              borderRadius: '4px'\n            }}\n          >\n            {notification.message}\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n});\n\n// 4. æ€§èƒ½ç›‘æ§ç»„ä»¶\nconst PerformanceMonitor = memo(() => {\n  const [renderCount, setRenderCount] = useState(0);\n  \n  React.useEffect(() => {\n    setRenderCount(prev => prev + 1);\n  });\n  \n  return (\n    <div style={{\n      position: 'fixed',\n      top: '16px',\n      right: '16px',\n      padding: '8px 12px',\n      backgroundColor: '#333',\n      color: 'white',\n      borderRadius: '4px',\n      fontSize: '12px',\n      zIndex: 1000\n    }}>\n      æ¸²æŸ“æ¬¡æ•°: {renderCount}\n    </div>\n  );\n});\n\n// 5. ä¸»åº”ç”¨ç»„ä»¶\nconst PerformanceOptimizedApp = () => {\n  return (\n    <UserProvider>\n      <UIProvider>\n        <div>\n          <h3>Context æ€§èƒ½ä¼˜åŒ–ç¤ºä¾‹</h3>\n          <p>æ‰“å¼€æ§åˆ¶å°æŸ¥çœ‹ç»„ä»¶æ¸²æŸ“æ—¥å¿—ï¼Œæ³¨æ„å„ç»„ä»¶çš„æ¸²æŸ“é¢‘ç‡ã€‚</p>\n          \n          <UserProfile />\n          <ThemeToggle />\n          <SidebarToggle />\n          <NotificationPanel />\n          \n          <PerformanceMonitor />\n          \n          <div style={{\n            marginTop: '24px',\n            padding: '16px',\n            backgroundColor: '#f9f9f9',\n            borderRadius: '8px'\n          }}>\n            <h4>æ€§èƒ½ä¼˜åŒ–è¦ç‚¹:</h4>\n            <ul>\n              <li>âœ… åˆ†ç¦»ä¸åŒæ›´æ–°é¢‘ç‡çš„ Context</li>\n              <li>âœ… ä½¿ç”¨ useMemo ç¼“å­˜ Context value</li>\n              <li>âœ… ä½¿ç”¨ useCallback ç¼“å­˜å‡½æ•°</li>\n              <li>âœ… ä½¿ç”¨ memo åŒ…è£…ç»„ä»¶</li>\n              <li>âœ… åˆ›å»ºé€‰æ‹©æ€§è®¢é˜…çš„ Hook</li>\n            </ul>\n          </div>\n        </div>\n      </UIProvider>\n    </UserProvider>\n  );\n};\n\nexport default PerformanceOptimizedApp;"
  },
  "commonMistakes": {
    "title": "å¸¸è§é”™è¯¯å’Œæœ€ä½³å®è·µ",
    "language": "javascript",
    "code": "import React, { createContext, useContext, useState, useMemo } from 'react';\n\n// âŒ é”™è¯¯1: æ²¡æœ‰æä¾›é»˜è®¤å€¼\nconst BadContext1 = createContext(); // æ²¡æœ‰é»˜è®¤å€¼\n\n// âœ… æ­£ç¡®1: æä¾›æœ‰æ„ä¹‰çš„é»˜è®¤å€¼\nconst GoodContext1 = createContext({\n  user: null,\n  setUser: () => {},\n  isLoading: false\n});\n\n// âŒ é”™è¯¯2: åœ¨ Provider å¤–ä½¿ç”¨ Context\nconst BadComponent1 = () => {\n  // è¿™ä¼šå¯¼è‡´é”™è¯¯ï¼Œå› ä¸ºæ²¡æœ‰ Provider\n  const context = useContext(BadContext1);\n  return <div>{context?.user?.name}</div>;\n};\n\n// âœ… æ­£ç¡®2: åˆ›å»ºå®‰å…¨çš„ Hook\nconst useGoodContext1 = () => {\n  const context = useContext(GoodContext1);\n  if (context === undefined) {\n    throw new Error('useGoodContext1 must be used within GoodContext1Provider');\n  }\n  return context;\n};\n\n// âŒ é”™è¯¯3: æ¯æ¬¡æ¸²æŸ“éƒ½åˆ›å»ºæ–°çš„ value å¯¹è±¡\nconst BadProvider = ({ children }) => {\n  const [user, setUser] = useState(null);\n  const [theme, setTheme] = useState('light');\n  \n  // âŒ æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šåˆ›å»ºæ–°å¯¹è±¡ï¼Œå¯¼è‡´æ‰€æœ‰æ¶ˆè´¹è€…é‡æ–°æ¸²æŸ“\n  return (\n    <BadContext1.Provider value={{ user, setUser, theme, setTheme }}>\n      {children}\n    </BadContext1.Provider>\n  );\n};\n\n// âœ… æ­£ç¡®3: ä½¿ç”¨ useMemo ç¼“å­˜ value\nconst GoodProvider = ({ children }) => {\n  const [user, setUser] = useState(null);\n  const [theme, setTheme] = useState('light');\n  \n  // âœ… ç¼“å­˜ value å¯¹è±¡\n  const value = useMemo(() => ({\n    user,\n    setUser,\n    theme,\n    setTheme\n  }), [user, theme]);\n  \n  return (\n    <GoodContext1.Provider value={value}>\n      {children}\n    </GoodContext1.Provider>\n  );\n};\n\n// âŒ é”™è¯¯4: å°†æ‰€æœ‰çŠ¶æ€æ”¾åœ¨ä¸€ä¸ª Context ä¸­\nconst BadGlobalContext = createContext();\n\nconst BadGlobalProvider = ({ children }) => {\n  const [user, setUser] = useState(null);\n  const [theme, setTheme] = useState('light');\n  const [cart, setCart] = useState([]);\n  const [notifications, setNotifications] = useState([]);\n  const [sidebarOpen, setSidebarOpen] = useState(true);\n  const [modalOpen, setModalOpen] = useState(false);\n  \n  // âŒ ä»»ä½•ä¸€ä¸ªçŠ¶æ€æ”¹å˜éƒ½ä¼šå¯¼è‡´æ‰€æœ‰æ¶ˆè´¹è€…é‡æ–°æ¸²æŸ“\n  const value = useMemo(() => ({\n    user, setUser,\n    theme, setTheme,\n    cart, setCart,\n    notifications, setNotifications,\n    sidebarOpen, setSidebarOpen,\n    modalOpen, setModalOpen\n  }), [user, theme, cart, notifications, sidebarOpen, modalOpen]);\n  \n  return (\n    <BadGlobalContext.Provider value={value}>\n      {children}\n    </BadGlobalContext.Provider>\n  );\n};\n\n// âœ… æ­£ç¡®4: æŒ‰åŠŸèƒ½åˆ†ç¦» Context\nconst UserContext = createContext();\nconst UIContext = createContext();\nconst CartContext = createContext();\n\nconst UserProvider = ({ children }) => {\n  const [user, setUser] = useState(null);\n  \n  const value = useMemo(() => ({\n    user,\n    setUser\n  }), [user]);\n  \n  return (\n    <UserContext.Provider value={value}>\n      {children}\n    </UserContext.Provider>\n  );\n};\n\nconst UIProvider = ({ children }) => {\n  const [theme, setTheme] = useState('light');\n  const [sidebarOpen, setSidebarOpen] = useState(true);\n  \n  const value = useMemo(() => ({\n    theme,\n    setTheme,\n    sidebarOpen,\n    setSidebarOpen\n  }), [theme, sidebarOpen]);\n  \n  return (\n    <UIContext.Provider value={value}>\n      {children}\n    </UIContext.Provider>\n  );\n};\n\n// âŒ é”™è¯¯5: è¿‡åº¦ä½¿ç”¨ Context\nconst OverusedContext = createContext();\n\nconst OverusedProvider = ({ children }) => {\n  const [simpleCounter, setSimpleCounter] = useState(0);\n  \n  // âŒ å¯¹äºç®€å•çš„æœ¬åœ°çŠ¶æ€ï¼Œä¸éœ€è¦ä½¿ç”¨ Context\n  const value = useMemo(() => ({\n    simpleCounter,\n    setSimpleCounter\n  }), [simpleCounter]);\n  \n  return (\n    <OverusedContext.Provider value={value}>\n      {children}\n    </OverusedContext.Provider>\n  );\n};\n\n// âœ… æ­£ç¡®5: åªåœ¨éœ€è¦è·¨å¤šå±‚ç»„ä»¶å…±äº«çŠ¶æ€æ—¶ä½¿ç”¨ Context\nconst SimpleCounterComponent = () => {\n  // âœ… ç®€å•çš„æœ¬åœ°çŠ¶æ€ç›´æ¥ä½¿ç”¨ useState\n  const [counter, setCounter] = useState(0);\n  \n  return (\n    <div>\n      <p>è®¡æ•°: {counter}</p>\n      <button onClick={() => setCounter(c => c + 1)}>å¢åŠ </button>\n    </div>\n  );\n};\n\n// âŒ é”™è¯¯6: åœ¨ Context ä¸­å­˜å‚¨å‡½æ•°è€Œä¸ç¼“å­˜\nconst BadFunctionContext = createContext();\n\nconst BadFunctionProvider = ({ children }) => {\n  const [data, setData] = useState([]);\n  \n  // âŒ æ¯æ¬¡æ¸²æŸ“éƒ½åˆ›å»ºæ–°å‡½æ•°\n  const value = {\n    data,\n    addItem: (item) => setData(prev => [...prev, item]),\n    removeItem: (id) => setData(prev => prev.filter(item => item.id !== id))\n  };\n  \n  return (\n    <BadFunctionContext.Provider value={value}>\n      {children}\n    </BadFunctionContext.Provider>\n  );\n};\n\n// âœ… æ­£ç¡®6: ä½¿ç”¨ useCallback ç¼“å­˜å‡½æ•°\nconst GoodFunctionContext = createContext();\n\nconst GoodFunctionProvider = ({ children }) => {\n  const [data, setData] = useState([]);\n  \n  // âœ… ç¼“å­˜å‡½æ•°\n  const addItem = React.useCallback((item) => {\n    setData(prev => [...prev, item]);\n  }, []);\n  \n  const removeItem = React.useCallback((id) => {\n    setData(prev => prev.filter(item => item.id !== id));\n  }, []);\n  \n  const value = useMemo(() => ({\n    data,\n    addItem,\n    removeItem\n  }), [data, addItem, removeItem]);\n  \n  return (\n    <GoodFunctionContext.Provider value={value}>\n      {children}\n    </GoodFunctionContext.Provider>\n  );\n};\n\n// ç¤ºä¾‹ç»„ä»¶å±•ç¤ºæœ€ä½³å®è·µ\nconst BestPracticesDemo = () => {\n  return (\n    <div>\n      <h3>Context æœ€ä½³å®è·µç¤ºä¾‹</h3>\n      \n      <div style={{ marginBottom: '24px' }}>\n        <h4>âœ… æ­£ç¡®çš„åšæ³•:</h4>\n        <ul>\n          <li>ä¸º Context æä¾›é»˜è®¤å€¼</li>\n          <li>åˆ›å»ºè‡ªå®šä¹‰ Hook å¹¶è¿›è¡Œé”™è¯¯æ£€æŸ¥</li>\n          <li>ä½¿ç”¨ useMemo ç¼“å­˜ Context value</li>\n          <li>ä½¿ç”¨ useCallback ç¼“å­˜å‡½æ•°</li>\n          <li>æŒ‰åŠŸèƒ½åˆ†ç¦»ä¸åŒçš„ Context</li>\n          <li>åªåœ¨éœ€è¦è·¨ç»„ä»¶å…±äº«çŠ¶æ€æ—¶ä½¿ç”¨ Context</li>\n        </ul>\n      </div>\n      \n      <div style={{ marginBottom: '24px' }}>\n        <h4>âŒ å¸¸è§é”™è¯¯:</h4>\n        <ul>\n          <li>ä¸æä¾› Context é»˜è®¤å€¼</li>\n          <li>åœ¨ Provider å¤–ä½¿ç”¨ Context</li>\n          <li>æ¯æ¬¡æ¸²æŸ“åˆ›å»ºæ–°çš„ value å¯¹è±¡</li>\n          <li>å°†æ‰€æœ‰çŠ¶æ€æ”¾åœ¨ä¸€ä¸ª Context ä¸­</li>\n          <li>è¿‡åº¦ä½¿ç”¨ Context</li>\n          <li>ä¸ç¼“å­˜ Context ä¸­çš„å‡½æ•°</li>\n        </ul>\n      </div>\n      \n      <div style={{\n        padding: '16px',\n        backgroundColor: '#e8f5e8',\n        borderRadius: '8px',\n        border: '1px solid #4CAF50'\n      }}>\n        <h4>ğŸ’¡ æ€§èƒ½ä¼˜åŒ–æç¤º:</h4>\n        <p>1. å°†é¢‘ç¹æ›´æ–°çš„çŠ¶æ€å’Œä¸å¸¸æ›´æ–°çš„çŠ¶æ€åˆ†ç¦»åˆ°ä¸åŒçš„ Context</p>\n        <p>2. ä½¿ç”¨ React.memo åŒ…è£…æ¶ˆè´¹ Context çš„ç»„ä»¶</p>\n        <p>3. è€ƒè™‘ä½¿ç”¨çŠ¶æ€ç®¡ç†åº“ï¼ˆå¦‚ Reduxã€Zustandï¼‰å¤„ç†å¤æ‚çš„å…¨å±€çŠ¶æ€</p>\n        <p>4. é¿å…åœ¨ Context ä¸­å­˜å‚¨å¤§é‡æ•°æ®</p>\n      </div>\n      \n      <SimpleCounterComponent />\n    </div>\n  );\n};\n\nexport default BestPracticesDemo;"
  }
}

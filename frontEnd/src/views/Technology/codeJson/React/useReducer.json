{
    "basicUsage": {
        "title": "useReducer åŸºæœ¬ç”¨æ³•",
        "language": "javascript",
        "code": "import React, { useReducer } from 'react';\n\n// å®šä¹‰åˆå§‹çŠ¶æ€\nconst initialState = {\n  count: 0,\n  step: 1\n};\n\n// å®šä¹‰ reducer å‡½æ•°\nconst counterReducer = (state, action) => {\n  switch (action.type) {\n    case 'increment':\n      return { ...state, count: state.count + state.step };\n    case 'decrement':\n      return { ...state, count: state.count - state.step };\n    case 'reset':\n      return { ...state, count: 0 };\n    case 'setStep':\n      return { ...state, step: action.payload };\n    case 'setCount':\n      return { ...state, count: action.payload };\n    default:\n      throw new Error(`æœªçŸ¥çš„ action ç±»å‹: ${action.type}`);\n  }\n};\n\nconst BasicCounterExample = () => {\n  const [state, dispatch] = useReducer(counterReducer, initialState);\n\n  return (\n    <div>\n      <h3>åŸºç¡€è®¡æ•°å™¨</h3>\n      \n      <div style={{ \n        fontSize: '24px', \n        textAlign: 'center', \n        padding: '16px',\n        background: '#f0f0f0',\n        borderRadius: '8px',\n        marginBottom: '16px'\n      }}>\n        è®¡æ•°: {state.count}\n      </div>\n      \n      <div style={{ marginBottom: '16px' }}>\n        <label>\n          æ­¥é•¿: \n          <input \n            type=\"number\"\n            value={state.step}\n            onChange={(e) => dispatch({ \n              type: 'setStep', \n              payload: parseInt(e.target.value) || 1 \n            })}\n            style={{ marginLeft: '8px', padding: '4px', width: '60px' }}\n          />\n        </label>\n      </div>\n      \n      <div style={{ display: 'flex', gap: '8px', flexWrap: 'wrap' }}>\n        <button \n          onClick={() => dispatch({ type: 'increment' })}\n          style={{ padding: '8px 16px', backgroundColor: '#4CAF50', color: 'white', border: 'none', borderRadius: '4px' }}\n        >\n          +{state.step}\n        </button>\n        \n        <button \n          onClick={() => dispatch({ type: 'decrement' })}\n          style={{ padding: '8px 16px', backgroundColor: '#f44336', color: 'white', border: 'none', borderRadius: '4px' }}\n        >\n          -{state.step}\n        </button>\n        \n        <button \n          onClick={() => dispatch({ type: 'reset' })}\n          style={{ padding: '8px 16px', backgroundColor: '#ff9800', color: 'white', border: 'none', borderRadius: '4px' }}\n        >\n          é‡ç½®\n        </button>\n        \n        <button \n          onClick={() => dispatch({ type: 'setCount', payload: 100 })}\n          style={{ padding: '8px 16px', backgroundColor: '#2196F3', color: 'white', border: 'none', borderRadius: '4px' }}\n        >\n          è®¾ä¸º100\n        </button>\n      </div>\n      \n      <div style={{ marginTop: '16px', padding: '8px', background: '#e3f2fd', borderRadius: '4px' }}>\n        <h4>å½“å‰çŠ¶æ€:</h4>\n        <pre>{JSON.stringify(state, null, 2)}</pre>\n      </div>\n    </div>\n  );\n};"
    },
    "complexState": {
        "title": "å¤æ‚çŠ¶æ€ç®¡ç†",
        "language": "javascript",
        "code": "import React, { useReducer, useState } from 'react';\n\n// å¤æ‚çš„åˆå§‹çŠ¶æ€\nconst initialTodoState = {\n  todos: [],\n  filter: 'all', // 'all', 'active', 'completed'\n  nextId: 1\n};\n\n// Todo reducer\nconst todoReducer = (state, action) => {\n  switch (action.type) {\n    case 'ADD_TODO':\n      return {\n        ...state,\n        todos: [\n          ...state.todos,\n          {\n            id: state.nextId,\n            text: action.payload.text,\n            completed: false,\n            createdAt: new Date().toISOString()\n          }\n        ],\n        nextId: state.nextId + 1\n      };\n      \n    case 'TOGGLE_TODO':\n      return {\n        ...state,\n        todos: state.todos.map(todo =>\n          todo.id === action.payload.id\n            ? { ...todo, completed: !todo.completed }\n            : todo\n        )\n      };\n      \n    case 'DELETE_TODO':\n      return {\n        ...state,\n        todos: state.todos.filter(todo => todo.id !== action.payload.id)\n      };\n      \n    case 'EDIT_TODO':\n      return {\n        ...state,\n        todos: state.todos.map(todo =>\n          todo.id === action.payload.id\n            ? { ...todo, text: action.payload.text }\n            : todo\n        )\n      };\n      \n    case 'SET_FILTER':\n      return {\n        ...state,\n        filter: action.payload.filter\n      };\n      \n    case 'CLEAR_COMPLETED':\n      return {\n        ...state,\n        todos: state.todos.filter(todo => !todo.completed)\n      };\n      \n    case 'TOGGLE_ALL':\n      const allCompleted = state.todos.every(todo => todo.completed);\n      return {\n        ...state,\n        todos: state.todos.map(todo => ({\n          ...todo,\n          completed: !allCompleted\n        }))\n      };\n      \n    default:\n      throw new Error(`æœªçŸ¥çš„ action ç±»å‹: ${action.type}`);\n  }\n};\n\nconst TodoApp = () => {\n  const [state, dispatch] = useReducer(todoReducer, initialTodoState);\n  const [inputText, setInputText] = useState('');\n  const [editingId, setEditingId] = useState(null);\n  const [editText, setEditText] = useState('');\n\n  // è¿‡æ»¤å¾…åŠäº‹é¡¹\n  const filteredTodos = state.todos.filter(todo => {\n    switch (state.filter) {\n      case 'active':\n        return !todo.completed;\n      case 'completed':\n        return todo.completed;\n      default:\n        return true;\n    }\n  });\n\n  // ç»Ÿè®¡ä¿¡æ¯\n  const stats = {\n    total: state.todos.length,\n    active: state.todos.filter(todo => !todo.completed).length,\n    completed: state.todos.filter(todo => todo.completed).length\n  };\n\n  const handleAddTodo = (e) => {\n    e.preventDefault();\n    if (inputText.trim()) {\n      dispatch({\n        type: 'ADD_TODO',\n        payload: { text: inputText.trim() }\n      });\n      setInputText('');\n    }\n  };\n\n  const handleEditStart = (todo) => {\n    setEditingId(todo.id);\n    setEditText(todo.text);\n  };\n\n  const handleEditSave = (id) => {\n    if (editText.trim()) {\n      dispatch({\n        type: 'EDIT_TODO',\n        payload: { id, text: editText.trim() }\n      });\n    }\n    setEditingId(null);\n    setEditText('');\n  };\n\n  const handleEditCancel = () => {\n    setEditingId(null);\n    setEditText('');\n  };\n\n  return (\n    <div style={{ maxWidth: '600px', margin: '0 auto' }}>\n      <h3>Todo åº”ç”¨ (useReducer)</h3>\n      \n      {/* æ·»åŠ æ–°å¾…åŠäº‹é¡¹ */}\n      <form onSubmit={handleAddTodo} style={{ marginBottom: '16px' }}>\n        <div style={{ display: 'flex', gap: '8px' }}>\n          <input\n            type=\"text\"\n            value={inputText}\n            onChange={(e) => setInputText(e.target.value)}\n            placeholder=\"æ·»åŠ æ–°çš„å¾…åŠäº‹é¡¹...\"\n            style={{ flex: 1, padding: '8px', border: '1px solid #ccc', borderRadius: '4px' }}\n          />\n          <button \n            type=\"submit\"\n            style={{ padding: '8px 16px', backgroundColor: '#4CAF50', color: 'white', border: 'none', borderRadius: '4px' }}\n          >\n            æ·»åŠ \n          </button>\n        </div>\n      </form>\n      \n      {/* ç»Ÿè®¡ä¿¡æ¯ */}\n      <div style={{ \n        display: 'flex', \n        justifyContent: 'space-between', \n        padding: '16px',\n        background: '#f5f5f5',\n        borderRadius: '8px',\n        marginBottom: '16px'\n      }}>\n        <span>æ€»è®¡: {stats.total}</span>\n        <span>è¿›è¡Œä¸­: {stats.active}</span>\n        <span>å·²å®Œæˆ: {stats.completed}</span>\n      </div>\n      \n      {/* è¿‡æ»¤å™¨ */}\n      <div style={{ marginBottom: '16px', display: 'flex', gap: '8px' }}>\n        {['all', 'active', 'completed'].map(filter => (\n          <button\n            key={filter}\n            onClick={() => dispatch({ type: 'SET_FILTER', payload: { filter } })}\n            style={{\n              padding: '6px 12px',\n              border: '1px solid #ccc',\n              borderRadius: '4px',\n              backgroundColor: state.filter === filter ? '#2196F3' : 'white',\n              color: state.filter === filter ? 'white' : 'black',\n              cursor: 'pointer'\n            }}\n          >\n            {filter === 'all' ? 'å…¨éƒ¨' : filter === 'active' ? 'è¿›è¡Œä¸­' : 'å·²å®Œæˆ'}\n          </button>\n        ))}\n      </div>\n      \n      {/* æ‰¹é‡æ“ä½œ */}\n      {state.todos.length > 0 && (\n        <div style={{ marginBottom: '16px', display: 'flex', gap: '8px' }}>\n          <button\n            onClick={() => dispatch({ type: 'TOGGLE_ALL' })}\n            style={{ padding: '6px 12px', border: '1px solid #ccc', borderRadius: '4px' }}\n          >\n            å…¨é€‰/å–æ¶ˆå…¨é€‰\n          </button>\n          {stats.completed > 0 && (\n            <button\n              onClick={() => dispatch({ type: 'CLEAR_COMPLETED' })}\n              style={{ padding: '6px 12px', border: '1px solid #ccc', borderRadius: '4px', backgroundColor: '#f44336', color: 'white' }}\n            >\n              æ¸…é™¤å·²å®Œæˆ\n            </button>\n          )}\n        </div>\n      )}\n      \n      {/* å¾…åŠäº‹é¡¹åˆ—è¡¨ */}\n      <div>\n        {filteredTodos.length === 0 ? (\n          <p style={{ textAlign: 'center', color: '#666', padding: '32px' }}>\n            {state.filter === 'all' ? 'æš‚æ— å¾…åŠäº‹é¡¹' : \n             state.filter === 'active' ? 'æ²¡æœ‰è¿›è¡Œä¸­çš„äº‹é¡¹' : 'æ²¡æœ‰å·²å®Œæˆçš„äº‹é¡¹'}\n          </p>\n        ) : (\n          <ul style={{ listStyle: 'none', padding: 0 }}>\n            {filteredTodos.map(todo => (\n              <li \n                key={todo.id}\n                style={{\n                  display: 'flex',\n                  alignItems: 'center',\n                  padding: '12px',\n                  border: '1px solid #eee',\n                  borderRadius: '4px',\n                  marginBottom: '8px',\n                  backgroundColor: todo.completed ? '#f9f9f9' : 'white'\n                }}\n              >\n                <input\n                  type=\"checkbox\"\n                  checked={todo.completed}\n                  onChange={() => dispatch({ type: 'TOGGLE_TODO', payload: { id: todo.id } })}\n                  style={{ marginRight: '12px' }}\n                />\n                \n                {editingId === todo.id ? (\n                  <div style={{ flex: 1, display: 'flex', gap: '8px' }}>\n                    <input\n                      type=\"text\"\n                      value={editText}\n                      onChange={(e) => setEditText(e.target.value)}\n                      onKeyPress={(e) => {\n                        if (e.key === 'Enter') handleEditSave(todo.id);\n                        if (e.key === 'Escape') handleEditCancel();\n                      }}\n                      style={{ flex: 1, padding: '4px', border: '1px solid #ccc', borderRadius: '4px' }}\n                      autoFocus\n                    />\n                    <button onClick={() => handleEditSave(todo.id)} style={{ padding: '4px 8px', backgroundColor: '#4CAF50', color: 'white', border: 'none', borderRadius: '4px' }}>ä¿å­˜</button>\n                    <button onClick={handleEditCancel} style={{ padding: '4px 8px', backgroundColor: '#f44336', color: 'white', border: 'none', borderRadius: '4px' }}>å–æ¶ˆ</button>\n                  </div>\n                ) : (\n                  <>\n                    <span \n                      style={{\n                        flex: 1,\n                        textDecoration: todo.completed ? 'line-through' : 'none',\n                        color: todo.completed ? '#666' : 'black',\n                        cursor: 'pointer'\n                      }}\n                      onDoubleClick={() => handleEditStart(todo)}\n                    >\n                      {todo.text}\n                    </span>\n                    \n                    <div style={{ display: 'flex', gap: '4px' }}>\n                      <button\n                        onClick={() => handleEditStart(todo)}\n                        style={{ padding: '4px 8px', backgroundColor: '#2196F3', color: 'white', border: 'none', borderRadius: '4px', fontSize: '12px' }}\n                      >\n                        ç¼–è¾‘\n                      </button>\n                      <button\n                        onClick={() => dispatch({ type: 'DELETE_TODO', payload: { id: todo.id } })}\n                        style={{ padding: '4px 8px', backgroundColor: '#f44336', color: 'white', border: 'none', borderRadius: '4px', fontSize: '12px' }}\n                      >\n                        åˆ é™¤\n                      </button>\n                    </div>\n                  </>\n                )}\n              </li>\n            ))}\n          </ul>\n        )}\n      </div>\n      \n      {/* çŠ¶æ€è°ƒè¯• */}\n      <details style={{ marginTop: '24px' }}>\n        <summary style={{ cursor: 'pointer', padding: '8px', background: '#f0f0f0', borderRadius: '4px' }}>\n          æŸ¥çœ‹çŠ¶æ€ (è°ƒè¯•)\n        </summary>\n        <pre style={{ background: '#f9f9f9', padding: '16px', borderRadius: '4px', overflow: 'auto' }}>\n          {JSON.stringify(state, null, 2)}\n        </pre>\n      </details>\n    </div>\n  );\n};"
    },
    "asyncActions": {
        "title": "å¼‚æ­¥æ“ä½œå¤„ç†",
        "language": "javascript",
        "code": "import React, { useReducer, useEffect } from 'react';\n\n// å¼‚æ­¥çŠ¶æ€ç®¡ç†çš„åˆå§‹çŠ¶æ€\nconst initialAsyncState = {\n  data: null,\n  loading: false,\n  error: null,\n  cache: new Map() // ç®€å•çš„ç¼“å­˜æœºåˆ¶\n};\n\n// å¼‚æ­¥æ“ä½œçš„ reducer\nconst asyncReducer = (state, action) => {\n  switch (action.type) {\n    case 'FETCH_START':\n      return {\n        ...state,\n        loading: true,\n        error: null\n      };\n      \n    case 'FETCH_SUCCESS':\n      return {\n        ...state,\n        loading: false,\n        data: action.payload.data,\n        error: null,\n        cache: new Map(state.cache).set(action.payload.cacheKey, {\n          data: action.payload.data,\n          timestamp: Date.now()\n        })\n      };\n      \n    case 'FETCH_ERROR':\n      return {\n        ...state,\n        loading: false,\n        error: action.payload.error,\n        data: null\n      };\n      \n    case 'CLEAR_ERROR':\n      return {\n        ...state,\n        error: null\n      };\n      \n    case 'CLEAR_DATA':\n      return {\n        ...state,\n        data: null\n      };\n      \n    case 'SET_CACHE':\n      return {\n        ...state,\n        cache: new Map(state.cache).set(action.payload.key, action.payload.value)\n      };\n      \n    case 'CLEAR_CACHE':\n      return {\n        ...state,\n        cache: new Map()\n      };\n      \n    default:\n      throw new Error(`æœªçŸ¥çš„ action ç±»å‹: ${action.type}`);\n  }\n};\n\n// æ¨¡æ‹Ÿ API è°ƒç”¨\nconst mockApiCall = (endpoint, delay = 1000) => {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      if (Math.random() > 0.8) {\n        reject(new Error(`API è°ƒç”¨å¤±è´¥: ${endpoint}`));\n      } else {\n        const mockData = {\n          '/api/users': [\n            { id: 1, name: 'å¼ ä¸‰', email: 'zhangsan@example.com' },\n            { id: 2, name: 'æå››', email: 'lisi@example.com' },\n            { id: 3, name: 'ç‹äº”', email: 'wangwu@example.com' }\n          ],\n          '/api/posts': [\n            { id: 1, title: 'ç¬¬ä¸€ç¯‡æ–‡ç« ', content: 'è¿™æ˜¯ç¬¬ä¸€ç¯‡æ–‡ç« çš„å†…å®¹...' },\n            { id: 2, title: 'ç¬¬äºŒç¯‡æ–‡ç« ', content: 'è¿™æ˜¯ç¬¬äºŒç¯‡æ–‡ç« çš„å†…å®¹...' },\n            { id: 3, title: 'ç¬¬ä¸‰ç¯‡æ–‡ç« ', content: 'è¿™æ˜¯ç¬¬ä¸‰ç¯‡æ–‡ç« çš„å†…å®¹...' }\n          ],\n          '/api/comments': [\n            { id: 1, postId: 1, author: 'è¯„è®ºè€…1', content: 'å¾ˆå¥½çš„æ–‡ç« ï¼' },\n            { id: 2, postId: 1, author: 'è¯„è®ºè€…2', content: 'æˆ‘åŒæ„è¿™ä¸ªè§‚ç‚¹ã€‚' },\n            { id: 3, postId: 2, author: 'è¯„è®ºè€…3', content: 'æœ‰è¶£çš„å†…å®¹ã€‚' }\n          ]\n        };\n        resolve(mockData[endpoint] || { message: 'æ•°æ®è·å–æˆåŠŸ', timestamp: Date.now() });\n      }\n    }, delay);\n  });\n};\n\nconst AsyncDataFetcher = () => {\n  const [state, dispatch] = useReducer(asyncReducer, initialAsyncState);\n\n  // è·å–æ•°æ®çš„å‡½æ•°\n  const fetchData = async (endpoint) => {\n    const cacheKey = endpoint;\n    const cached = state.cache.get(cacheKey);\n    \n    // æ£€æŸ¥ç¼“å­˜ (5åˆ†é’Ÿæœ‰æ•ˆæœŸ)\n    if (cached && Date.now() - cached.timestamp < 5 * 60 * 1000) {\n      dispatch({\n        type: 'FETCH_SUCCESS',\n        payload: { data: cached.data, cacheKey }\n      });\n      return;\n    }\n\n    dispatch({ type: 'FETCH_START' });\n    \n    try {\n      const data = await mockApiCall(endpoint);\n      dispatch({\n        type: 'FETCH_SUCCESS',\n        payload: { data, cacheKey }\n      });\n    } catch (error) {\n      dispatch({\n        type: 'FETCH_ERROR',\n        payload: { error: error.message }\n      });\n    }\n  };\n\n  const endpoints = [\n    { path: '/api/users', label: 'ç”¨æˆ·æ•°æ®' },\n    { path: '/api/posts', label: 'æ–‡ç« æ•°æ®' },\n    { path: '/api/comments', label: 'è¯„è®ºæ•°æ®' }\n  ];\n\n  return (\n    <div>\n      <h3>å¼‚æ­¥æ•°æ®è·å– (useReducer)</h3>\n      \n      {/* æ§åˆ¶æŒ‰é’® */}\n      <div style={{ marginBottom: '16px', display: 'flex', gap: '8px', flexWrap: 'wrap' }}>\n        {endpoints.map(endpoint => (\n          <button\n            key={endpoint.path}\n            onClick={() => fetchData(endpoint.path)}\n            disabled={state.loading}\n            style={{\n              padding: '8px 16px',\n              backgroundColor: state.loading ? '#ccc' : '#2196F3',\n              color: 'white',\n              border: 'none',\n              borderRadius: '4px',\n              cursor: state.loading ? 'not-allowed' : 'pointer'\n            }}\n          >\n            è·å–{endpoint.label}\n          </button>\n        ))}\n        \n        <button\n          onClick={() => dispatch({ type: 'CLEAR_DATA' })}\n          style={{\n            padding: '8px 16px',\n            backgroundColor: '#ff9800',\n            color: 'white',\n            border: 'none',\n            borderRadius: '4px'\n          }}\n        >\n          æ¸…é™¤æ•°æ®\n        </button>\n        \n        <button\n          onClick={() => dispatch({ type: 'CLEAR_CACHE' })}\n          style={{\n            padding: '8px 16px',\n            backgroundColor: '#f44336',\n            color: 'white',\n            border: 'none',\n            borderRadius: '4px'\n          }}\n        >\n          æ¸…é™¤ç¼“å­˜\n        </button>\n      </div>\n      \n      {/* çŠ¶æ€æ˜¾ç¤º */}\n      <div style={{ marginBottom: '16px' }}>\n        {state.loading && (\n          <div style={{ \n            padding: '16px', \n            background: '#e3f2fd', \n            borderRadius: '4px',\n            display: 'flex',\n            alignItems: 'center',\n            gap: '8px'\n          }}>\n            <div style={{\n              width: '20px',\n              height: '20px',\n              border: '2px solid #2196F3',\n              borderTop: '2px solid transparent',\n              borderRadius: '50%',\n              animation: 'spin 1s linear infinite'\n            }} />\n            æ­£åœ¨åŠ è½½æ•°æ®...\n          </div>\n        )}\n        \n        {state.error && (\n          <div style={{ \n            padding: '16px', \n            background: '#ffebee', \n            borderRadius: '4px',\n            color: '#d32f2f',\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'center'\n          }}>\n            <span>âŒ é”™è¯¯: {state.error}</span>\n            <button\n              onClick={() => dispatch({ type: 'CLEAR_ERROR' })}\n              style={{\n                padding: '4px 8px',\n                backgroundColor: '#f44336',\n                color: 'white',\n                border: 'none',\n                borderRadius: '4px',\n                fontSize: '12px'\n              }}\n            >\n              æ¸…é™¤é”™è¯¯\n            </button>\n          </div>\n        )}\n      </div>\n      \n      {/* æ•°æ®æ˜¾ç¤º */}\n      {state.data && (\n        <div style={{ \n          padding: '16px', \n          background: '#e8f5e8', \n          borderRadius: '4px',\n          marginBottom: '16px'\n        }}>\n          <h4>è·å–çš„æ•°æ®:</h4>\n          <pre style={{ \n            background: 'white', \n            padding: '12px', \n            borderRadius: '4px',\n            overflow: 'auto',\n            maxHeight: '300px'\n          }}>\n            {JSON.stringify(state.data, null, 2)}\n          </pre>\n        </div>\n      )}\n      \n      {/* ç¼“å­˜ä¿¡æ¯ */}\n      {state.cache.size > 0 && (\n        <div style={{ \n          padding: '16px', \n          background: '#fff3e0', \n          borderRadius: '4px'\n        }}>\n          <h4>ç¼“å­˜ä¿¡æ¯ ({state.cache.size} é¡¹):</h4>\n          <ul style={{ margin: 0, paddingLeft: '20px' }}>\n            {Array.from(state.cache.entries()).map(([key, value]) => (\n              <li key={key}>\n                <strong>{key}</strong> - ç¼“å­˜æ—¶é—´: {new Date(value.timestamp).toLocaleTimeString()}\n              </li>\n            ))}\n          </ul>\n        </div>\n      )}\n      \n      <style>{`\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n      `}</style>\n    </div>\n  );\n};\n\n// å¸¦æœ‰é‡è¯•æœºåˆ¶çš„å¼‚æ­¥ç»„ä»¶\nconst AsyncWithRetry = () => {\n  const [state, dispatch] = useReducer(asyncReducer, {\n    ...initialAsyncState,\n    retryCount: 0,\n    maxRetries: 3\n  });\n\n  const fetchWithRetry = async (endpoint, retryCount = 0) => {\n    dispatch({ type: 'FETCH_START' });\n    \n    try {\n      const data = await mockApiCall(endpoint, 2000); // æ›´é•¿çš„å»¶è¿Ÿ\n      dispatch({\n        type: 'FETCH_SUCCESS',\n        payload: { data, cacheKey: endpoint }\n      });\n    } catch (error) {\n      if (retryCount < 3) {\n        console.log(`é‡è¯•ç¬¬ ${retryCount + 1} æ¬¡...`);\n        setTimeout(() => {\n          fetchWithRetry(endpoint, retryCount + 1);\n        }, 1000 * (retryCount + 1)); // é€’å¢å»¶è¿Ÿ\n      } else {\n        dispatch({\n          type: 'FETCH_ERROR',\n          payload: { error: `${error.message} (é‡è¯• ${retryCount} æ¬¡åå¤±è´¥)` }\n        });\n      }\n    }\n  };\n\n  return (\n    <div style={{ marginTop: '32px' }}>\n      <h3>å¸¦é‡è¯•æœºåˆ¶çš„å¼‚æ­¥è·å–</h3>\n      \n      <button\n        onClick={() => fetchWithRetry('/api/users')}\n        disabled={state.loading}\n        style={{\n          padding: '8px 16px',\n          backgroundColor: state.loading ? '#ccc' : '#4CAF50',\n          color: 'white',\n          border: 'none',\n          borderRadius: '4px',\n          cursor: state.loading ? 'not-allowed' : 'pointer'\n        }}\n      >\n        {state.loading ? 'è·å–ä¸­...' : 'è·å–æ•°æ® (å¸¦é‡è¯•)'}\n      </button>\n      \n      {state.loading && (\n        <div style={{ marginTop: '16px', color: '#666' }}>\n          æ­£åœ¨è·å–æ•°æ®ï¼Œå¦‚æœå¤±è´¥ä¼šè‡ªåŠ¨é‡è¯•æœ€å¤š3æ¬¡...\n        </div>\n      )}\n      \n      {state.error && (\n        <div style={{ \n          marginTop: '16px',\n          padding: '16px', \n          background: '#ffebee', \n          borderRadius: '4px',\n          color: '#d32f2f'\n        }}>\n          {state.error}\n        </div>\n      )}\n      \n      {state.data && (\n        <div style={{ \n          marginTop: '16px',\n          padding: '16px', \n          background: '#e8f5e8', \n          borderRadius: '4px'\n        }}>\n          <h4>æˆåŠŸè·å–æ•°æ®:</h4>\n          <pre style={{ background: 'white', padding: '12px', borderRadius: '4px' }}>\n            {JSON.stringify(state.data, null, 2)}\n          </pre>\n        </div>\n      )}\n    </div>\n  );\n};\n\n// ç»„åˆç»„ä»¶\nconst AsyncActionsExample = () => {\n  return (\n    <div>\n      <AsyncDataFetcher />\n      <AsyncWithRetry />\n    </div>\n  );\n};\n\nexport default AsyncActionsExample;"
    },
    "bestPractices": {
        "title": "æœ€ä½³å®è·µå’Œæ¨¡å¼",
        "language": "javascript",
        "code": "import React, { useReducer, useContext, createContext } from 'react';\n\n// 1. ä½¿ç”¨ TypeScript ç±»å‹å®šä¹‰ (JavaScript ä¸­ç”¨æ³¨é‡Šè¯´æ˜)\n\n// Action ç±»å‹å®šä¹‰\nconst ActionTypes = {\n  SET_USER: 'SET_USER',\n  SET_THEME: 'SET_THEME',\n  SET_LANGUAGE: 'SET_LANGUAGE',\n  TOGGLE_SIDEBAR: 'TOGGLE_SIDEBAR',\n  ADD_NOTIFICATION: 'ADD_NOTIFICATION',\n  REMOVE_NOTIFICATION: 'REMOVE_NOTIFICATION'\n};\n\n// åˆå§‹çŠ¶æ€\nconst initialAppState = {\n  user: null,\n  theme: 'light',\n  language: 'zh-CN',\n  sidebarOpen: true,\n  notifications: []\n};\n\n// 2. æ‹†åˆ† reducer å‡½æ•°\nconst userReducer = (state, action) => {\n  switch (action.type) {\n    case ActionTypes.SET_USER:\n      return { ...state, user: action.payload };\n    default:\n      return state;\n  }\n};\n\nconst uiReducer = (state, action) => {\n  switch (action.type) {\n    case ActionTypes.SET_THEME:\n      return { ...state, theme: action.payload };\n    case ActionTypes.SET_LANGUAGE:\n      return { ...state, language: action.payload };\n    case ActionTypes.TOGGLE_SIDEBAR:\n      return { ...state, sidebarOpen: !state.sidebarOpen };\n    default:\n      return state;\n  }\n};\n\nconst notificationReducer = (state, action) => {\n  switch (action.type) {\n    case ActionTypes.ADD_NOTIFICATION:\n      return {\n        ...state,\n        notifications: [\n          ...state.notifications,\n          {\n            id: Date.now(),\n            ...action.payload,\n            timestamp: new Date().toISOString()\n          }\n        ]\n      };\n    case ActionTypes.REMOVE_NOTIFICATION:\n      return {\n        ...state,\n        notifications: state.notifications.filter(\n          notification => notification.id !== action.payload.id\n        )\n      };\n    default:\n      return state;\n  }\n};\n\n// 3. ç»„åˆ reducer\nconst appReducer = (state, action) => {\n  // å…ˆåº”ç”¨å„ä¸ªå­ reducer\n  let newState = state;\n  newState = userReducer(newState, action);\n  newState = uiReducer(newState, action);\n  newState = notificationReducer(newState, action);\n  \n  return newState;\n};\n\n// 4. Action Creators (å¯é€‰ï¼Œä½†æ¨è)\nconst actionCreators = {\n  setUser: (user) => ({ type: ActionTypes.SET_USER, payload: user }),\n  setTheme: (theme) => ({ type: ActionTypes.SET_THEME, payload: theme }),\n  setLanguage: (language) => ({ type: ActionTypes.SET_LANGUAGE, payload: language }),\n  toggleSidebar: () => ({ type: ActionTypes.TOGGLE_SIDEBAR }),\n  addNotification: (notification) => ({ type: ActionTypes.ADD_NOTIFICATION, payload: notification }),\n  removeNotification: (id) => ({ type: ActionTypes.REMOVE_NOTIFICATION, payload: { id } })\n};\n\n// 5. Context æä¾›è€…\nconst AppStateContext = createContext();\nconst AppDispatchContext = createContext();\n\nconst AppProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(appReducer, initialAppState);\n  \n  return (\n    <AppStateContext.Provider value={state}>\n      <AppDispatchContext.Provider value={dispatch}>\n        {children}\n      </AppDispatchContext.Provider>\n    </AppStateContext.Provider>\n  );\n};\n\n// 6. è‡ªå®šä¹‰ Hooks\nconst useAppState = () => {\n  const context = useContext(AppStateContext);\n  if (!context) {\n    throw new Error('useAppState must be used within AppProvider');\n  }\n  return context;\n};\n\nconst useAppDispatch = () => {\n  const context = useContext(AppDispatchContext);\n  if (!context) {\n    throw new Error('useAppDispatch must be used within AppProvider');\n  }\n  return context;\n};\n\n// 7. é«˜çº§è‡ªå®šä¹‰ Hooks\nconst useActions = () => {\n  const dispatch = useAppDispatch();\n  \n  return {\n    setUser: (user) => dispatch(actionCreators.setUser(user)),\n    setTheme: (theme) => dispatch(actionCreators.setTheme(theme)),\n    setLanguage: (language) => dispatch(actionCreators.setLanguage(language)),\n    toggleSidebar: () => dispatch(actionCreators.toggleSidebar()),\n    addNotification: (notification) => dispatch(actionCreators.addNotification(notification)),\n    removeNotification: (id) => dispatch(actionCreators.removeNotification(id))\n  };\n};\n\n// 8. ç»„ä»¶ç¤ºä¾‹\nconst UserProfile = () => {\n  const { user } = useAppState();\n  const { setUser, addNotification } = useActions();\n  \n  const handleLogin = () => {\n    const newUser = {\n      id: 1,\n      name: 'å¼ ä¸‰',\n      email: 'zhangsan@example.com',\n      avatar: 'ğŸ‘¤'\n    };\n    setUser(newUser);\n    addNotification({\n      type: 'success',\n      message: 'ç™»å½•æˆåŠŸï¼',\n      duration: 3000\n    });\n  };\n  \n  const handleLogout = () => {\n    setUser(null);\n    addNotification({\n      type: 'info',\n      message: 'å·²é€€å‡ºç™»å½•',\n      duration: 3000\n    });\n  };\n  \n  return (\n    <div style={{ padding: '16px', border: '1px solid #ccc', borderRadius: '8px', marginBottom: '16px' }}>\n      <h4>ç”¨æˆ·ä¿¡æ¯</h4>\n      {user ? (\n        <div>\n          <p>{user.avatar} {user.name}</p>\n          <p>ğŸ“§ {user.email}</p>\n          <button onClick={handleLogout} style={{ padding: '8px 16px', backgroundColor: '#f44336', color: 'white', border: 'none', borderRadius: '4px' }}>\n            é€€å‡ºç™»å½•\n          </button>\n        </div>\n      ) : (\n        <div>\n          <p>æœªç™»å½•</p>\n          <button onClick={handleLogin} style={{ padding: '8px 16px', backgroundColor: '#4CAF50', color: 'white', border: 'none', borderRadius: '4px' }}>\n            ç™»å½•\n          </button>\n        </div>\n      )}\n    </div>\n  );\n};\n\nconst ThemeSelector = () => {\n  const { theme } = useAppState();\n  const { setTheme, addNotification } = useActions();\n  \n  const themes = [\n    { value: 'light', label: 'æµ…è‰²ä¸»é¢˜', emoji: 'â˜€ï¸' },\n    { value: 'dark', label: 'æ·±è‰²ä¸»é¢˜', emoji: 'ğŸŒ™' },\n    { value: 'auto', label: 'è‡ªåŠ¨', emoji: 'ğŸ”„' }\n  ];\n  \n  const handleThemeChange = (newTheme) => {\n    setTheme(newTheme);\n    const themeLabel = themes.find(t => t.value === newTheme)?.label;\n    addNotification({\n      type: 'info',\n      message: `å·²åˆ‡æ¢åˆ°${themeLabel}`,\n      duration: 2000\n    });\n  };\n  \n  return (\n    <div style={{ padding: '16px', border: '1px solid #ccc', borderRadius: '8px', marginBottom: '16px' }}>\n      <h4>ä¸»é¢˜è®¾ç½®</h4>\n      <p>å½“å‰ä¸»é¢˜: {themes.find(t => t.value === theme)?.emoji} {themes.find(t => t.value === theme)?.label}</p>\n      <div style={{ display: 'flex', gap: '8px' }}>\n        {themes.map(themeOption => (\n          <button\n            key={themeOption.value}\n            onClick={() => handleThemeChange(themeOption.value)}\n            style={{\n              padding: '8px 12px',\n              border: '1px solid #ccc',\n              borderRadius: '4px',\n              backgroundColor: theme === themeOption.value ? '#2196F3' : 'white',\n              color: theme === themeOption.value ? 'white' : 'black',\n              cursor: 'pointer'\n            }}\n          >\n            {themeOption.emoji} {themeOption.label}\n          </button>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nconst NotificationCenter = () => {\n  const { notifications } = useAppState();\n  const { removeNotification } = useActions();\n  \n  // è‡ªåŠ¨ç§»é™¤é€šçŸ¥\n  React.useEffect(() => {\n    notifications.forEach(notification => {\n      if (notification.duration) {\n        setTimeout(() => {\n          removeNotification(notification.id);\n        }, notification.duration);\n      }\n    });\n  }, [notifications, removeNotification]);\n  \n  if (notifications.length === 0) return null;\n  \n  return (\n    <div style={{ position: 'fixed', top: '16px', right: '16px', zIndex: 1000 }}>\n      {notifications.map(notification => (\n        <div\n          key={notification.id}\n          style={{\n            padding: '12px 16px',\n            marginBottom: '8px',\n            borderRadius: '4px',\n            backgroundColor: \n              notification.type === 'success' ? '#4CAF50' :\n              notification.type === 'error' ? '#f44336' :\n              notification.type === 'warning' ? '#ff9800' : '#2196F3',\n            color: 'white',\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'center',\n            minWidth: '300px',\n            boxShadow: '0 2px 8px rgba(0,0,0,0.1)'\n          }}\n        >\n          <span>{notification.message}</span>\n          <button\n            onClick={() => removeNotification(notification.id)}\n            style={{\n              background: 'none',\n              border: 'none',\n              color: 'white',\n              cursor: 'pointer',\n              fontSize: '16px',\n              padding: '0 4px'\n            }}\n          >\n            Ã—\n          </button>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nconst Sidebar = () => {\n  const { sidebarOpen } = useAppState();\n  const { toggleSidebar } = useActions();\n  \n  return (\n    <div style={{ display: 'flex' }}>\n      <div style={{\n        width: sidebarOpen ? '200px' : '0',\n        backgroundColor: '#f5f5f5',\n        transition: 'width 0.3s ease',\n        overflow: 'hidden',\n        borderRight: sidebarOpen ? '1px solid #ccc' : 'none'\n      }}>\n        <div style={{ padding: '16px', width: '200px' }}>\n          <h4>ä¾§è¾¹æ </h4>\n          <ul style={{ listStyle: 'none', padding: 0 }}>\n            <li style={{ padding: '8px 0' }}>ğŸ“Š ä»ªè¡¨æ¿</li>\n            <li style={{ padding: '8px 0' }}>ğŸ‘¥ ç”¨æˆ·ç®¡ç†</li>\n            <li style={{ padding: '8px 0' }}>âš™ï¸ è®¾ç½®</li>\n            <li style={{ padding: '8px 0' }}>ğŸ“ˆ åˆ†æ</li>\n          </ul>\n        </div>\n      </div>\n      \n      <div style={{ flex: 1, padding: '16px' }}>\n        <button\n          onClick={toggleSidebar}\n          style={{\n            padding: '8px 12px',\n            backgroundColor: '#2196F3',\n            color: 'white',\n            border: 'none',\n            borderRadius: '4px',\n            cursor: 'pointer',\n            marginBottom: '16px'\n          }}\n        >\n          {sidebarOpen ? 'éšè—' : 'æ˜¾ç¤º'} ä¾§è¾¹æ \n        </button>\n        \n        <h3>ä¸»è¦å†…å®¹åŒºåŸŸ</h3>\n        <p>è¿™é‡Œæ˜¯åº”ç”¨çš„ä¸»è¦å†…å®¹ã€‚ä¾§è¾¹æ å¯ä»¥é€šè¿‡æŒ‰é’®åˆ‡æ¢æ˜¾ç¤º/éšè—ã€‚</p>\n      </div>\n    </div>\n  );\n};\n\n// 9. ä¸»åº”ç”¨ç»„ä»¶\nconst BestPracticesApp = () => {\n  return (\n    <AppProvider>\n      <div>\n        <h3>useReducer æœ€ä½³å®è·µç¤ºä¾‹</h3>\n        \n        <UserProfile />\n        <ThemeSelector />\n        <Sidebar />\n        <NotificationCenter />\n        \n        {/* çŠ¶æ€è°ƒè¯• */}\n        <StateDebugger />\n      </div>\n    </AppProvider>\n  );\n};\n\n// 10. çŠ¶æ€è°ƒè¯•ç»„ä»¶\nconst StateDebugger = () => {\n  const state = useAppState();\n  const [showDebug, setShowDebug] = React.useState(false);\n  \n  return (\n    <div style={{ marginTop: '32px' }}>\n      <button\n        onClick={() => setShowDebug(!showDebug)}\n        style={{\n          padding: '8px 16px',\n          backgroundColor: '#ff9800',\n          color: 'white',\n          border: 'none',\n          borderRadius: '4px',\n          cursor: 'pointer'\n        }}\n      >\n        {showDebug ? 'éšè—' : 'æ˜¾ç¤º'} çŠ¶æ€è°ƒè¯•\n      </button>\n      \n      {showDebug && (\n        <div style={{\n          marginTop: '16px',\n          padding: '16px',\n          backgroundColor: '#f9f9f9',\n          borderRadius: '8px',\n          border: '1px solid #ddd'\n        }}>\n          <h4>å½“å‰åº”ç”¨çŠ¶æ€:</h4>\n          <pre style={{\n            backgroundColor: 'white',\n            padding: '12px',\n            borderRadius: '4px',\n            overflow: 'auto',\n            fontSize: '12px'\n          }}>\n            {JSON.stringify(state, null, 2)}\n          </pre>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default BestPracticesApp;"
    }
}

# PWA 离线视频编辑器 TODO（React + Workbox + WebAssembly）

## 目标
- 无网可编辑（裁剪/拼接/滤镜/字幕），联网自动同步至云端，支持断点续传。

## 技术栈
- React + Vite + TypeScript
- PWA：Workbox（缓存/离线策略）+ Background Sync
- 媒体：FFmpeg.wasm（Worker）/ 可选 WebCodecs
- 存储：IndexedDB（媒体/工程文件）
- 上传：分片/重试/秒传（tus/自研）

## 难点
- wasm 编解码性能与内存占用；大文件缓存与存储配额；断点续传一致性。

## 里程碑
- M0 初始化与 PWA 骨架
- M1 时间轴与基础裁剪
- M2 滤镜/转码/导出
- M3 离线缓存与自动同步
- M4 断点续传/冲突解决
- M5 测试与发布

## 任务清单
- **[M0] 基建**
  - [ ] PWA 清单/Service Worker 缓存策略（媒体分层缓存）
  - [ ] FFmpeg.wasm 在 Worker 中初始化/心跳与资源预热
  - [ ] 工程文件模型与存储（IndexedDB）
- **[M1] 时间轴**
  - [ ] 轨道/片段/裁剪与波形预览
  - [ ] 键盘快捷键与撤销/重做
- **[M2] 导出/滤镜**
  - [ ] 预设导出（分辨率/码率/容器）
  - [ ] 基础滤镜（亮度/对比度/色调）与实时预览
- **[M3] 离线/同步**
  - [ ] 媒体缓存策略与清理；容量预估与提示
  - [ ] 在线后自动同步；后台重试与冲突合并策略
- **[M4] 续传**
  - [ ] 分片上传/失败重试/断点续传；ETag 校验
- **[M5] 测试/发布**
  - [ ] 大文件压测脚本；异常网络/断电恢复用例
  - [ ] Lighthouse PWA 审计 >= 90 分

## 指标
- 1080p 剪辑预览 30fps；离线首次可用 < 3s；上传失败可自动恢复。

## 风险与应对
- [内存] 分片处理/流式导出；[wasm 体积] 资源懒加载；[浏览器配额] 容量提示与逐步清理。

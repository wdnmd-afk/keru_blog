# 隐私保护的实时聊天 TODO（React + Signal Protocol + WebSocket）

## 目标
- 端到端加密一对一/群聊，文件分享与阅后即焚，多设备同步。

## 技术栈
- React + TypeScript
- 协议：Signal Protocol（密钥/预键/双棘轮）
- 传输：WebSocket（或 SSE/HTTP2 备用）
- 存储：密文落地（IndexedDB/本地），服务端零信任

## 难点
- 密钥管理/多设备；离线消息/预键耗尽；大文件加密分片与重传。

## 里程碑
- M0 初始化与密钥生成
- M1 会话建立与消息收发
- M2 群聊与多设备
- M3 文件传输与阅后即焚
- M4 可用性与安全审计
- M5 发布

## 任务清单
- **[M0] 基建/密钥**
  - [ ] 设备身份密钥/注册/备份与恢复
  - [ ] 预键发布与配额监控
- **[M1] 会话**
  - [ ] 1:1 会话建立（X3DH）与消息加解密
  - [ ] 重发/乱序/去重与时钟漂移处理
- **[M2] 群聊/多设备**
  - [ ] 群会话密钥轮换；设备绑定/解绑流程
  - [ ] 消息回放与漫游同步
- **[M3] 文件与焚毁**
  - [ ] 分片加密上传/下载；进度与断点续传
  - [ ] 到期自动删除；截图/转发限制（尽量）
- **[M4] 安全/可用性**
  - [ ] 安全审计清单与渗透测试计划
  - [ ] 灰度发布与告警看板

## 指标
- 端到端延迟 p95 < 200ms；消息丢失率 < 0.01%；密钥泄露 0 起。

## 风险与应对
- [库可用性] 明确选型与维护状态；[密钥恢复] 安全备份；[法律合规] 明确数据边界。

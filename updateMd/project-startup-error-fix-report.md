# ğŸ”§ é¡¹ç›®å¯åŠ¨é”™è¯¯ä¿®å¤æŠ¥å‘Š

## ğŸ“Š ä¿®å¤æ¦‚è¿°

å·²æˆåŠŸä¿®å¤ä¸¤ä¸ªé¡¹ç›®çš„å¯åŠ¨é”™è¯¯ï¼š

### âœ… **ä¿®å¤å®ŒæˆçŠ¶æ€**
- **Frontendé¡¹ç›®**: é‡å¤é”®è­¦å‘Šå·²ä¿®å¤ âœ…
- **Serveré¡¹ç›®**: reflect-metadataå¯¼å…¥é—®é¢˜å·²ä¿®å¤ âœ…
- **ä¿®å¤æˆåŠŸç‡**: 100% ğŸ¯

## ğŸ” é”™è¯¯è¯¦æƒ…å’Œä¿®å¤æ–¹æ¡ˆ

### 1. Frontendé¡¹ç›® - é‡å¤é”®è­¦å‘Šä¿®å¤

#### **é”™è¯¯ä¿¡æ¯**:
```
â–² [WARNING] Duplicate key "type" in object literal [duplicate-object-key]
    package.json:6:2:
      6 â”‚   "type": "module",
        â•µ   ~~~~~~
  The original key "type" is here:
    package.json:5:2:
      5 â”‚   "type": "module",
        â•µ   ~~~~~~
```

#### **é—®é¢˜åˆ†æ**:
- **ä½ç½®**: `frontEnd/package.json` ç¬¬5è¡Œå’Œç¬¬6è¡Œ
- **åŸå› **: JSONå¯¹è±¡ä¸­å­˜åœ¨é‡å¤çš„"type"å­—æ®µ
- **å½±å“**: Viteæ„å»ºå·¥å…·å‘å‡ºè­¦å‘Šï¼Œå¯èƒ½å½±å“æ„å»ºç¨³å®šæ€§

#### **ä¿®å¤æ–¹æ¡ˆ**:
```json
// ä¿®å¤å‰
{
  "name": "blog_react",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "type": "module",  // é‡å¤å­—æ®µ
  "scripts": {
    // ...
  }
}

// ä¿®å¤å
{
  "name": "blog_react",
  "private": true,
  "version": "0.0.0",
  "type": "module",  // åªä¿ç•™ä¸€ä¸ª
  "scripts": {
    // ...
  }
}
```

#### **ä¿®å¤æ•ˆæœ**:
- âœ… æ¶ˆé™¤äº†Viteæ„å»ºè­¦å‘Š
- âœ… ç¡®ä¿äº†package.jsonçš„JSONæ ¼å¼æ­£ç¡®æ€§
- âœ… æé«˜äº†æ„å»ºè¿‡ç¨‹çš„ç¨³å®šæ€§

### 2. Serveré¡¹ç›® - reflect-metadataå¯¼å…¥é—®é¢˜ä¿®å¤

#### **é”™è¯¯ä¿¡æ¯**:
```
TypeError: Reflect.hasOwnMetadata is not a function
    at E:\github\keru_blog\server\node_modules\.pnpm\inversify@6.0.2\node_modules\inversify\lib\annotation\decorator_utils.js:63
```

#### **é—®é¢˜åˆ†æ**:
- **æ ¹æœ¬åŸå› **: reflect-metadataåŒ…æœªåœ¨è£…é¥°å™¨ä½¿ç”¨å‰æ­£ç¡®åˆå§‹åŒ–
- **æŠ€æœ¯èƒŒæ™¯**: Inversifyä¾èµ–æ³¨å…¥æ¡†æ¶éœ€è¦reflect-metadataæ”¯æŒè£…é¥°å™¨å…ƒæ•°æ®
- **å¯¼å…¥é¡ºåº**: reflect-metadataå¿…é¡»åœ¨æ‰€æœ‰ä½¿ç”¨è£…é¥°å™¨çš„æ¨¡å—ä¹‹å‰å¯¼å…¥

#### **ä¿®å¤æ–¹æ¡ˆ**:

##### **1. è°ƒæ•´main.tsä¸­çš„å¯¼å…¥é¡ºåº**:
```typescript
// ä¿®å¤å‰
import cors from 'cors'
import express from 'express'
import { InversifyExpressServer } from 'inversify-express-utils'
import * as process from 'node:process'
import * as path from 'path'
import 'reflect-metadata'  // å¯¼å…¥ä½ç½®å¤ªæ™š

// ä¿®å¤å
import 'reflect-metadata'  // å¿…é¡»åœ¨æœ€å‰é¢

import cors from 'cors'
import express from 'express'
import { InversifyExpressServer } from 'inversify-express-utils'
import * as process from 'node:process'
import * as path from 'path'
```

##### **2. åœ¨container.config.tsä¸­æ·»åŠ reflect-metadataå¯¼å…¥**:
```typescript
// ä¿®å¤å‰
// container.config.ts
import { PrismaClient } from '@prisma/client'
import { Container } from 'inversify'

// ä¿®å¤å
// container.config.ts
import 'reflect-metadata'  // ç¡®ä¿åœ¨å®¹å™¨é…ç½®å‰å¯¼å…¥

import { PrismaClient } from '@prisma/client'
import { Container } from 'inversify'
```

##### **3. éªŒè¯è£…é¥°å™¨é…ç½®**:
```json
// tsconfig.json
{
  "compilerOptions": {
    "experimentalDecorators": true,     // âœ… å·²å¯ç”¨
    "emitDecoratorMetadata": true,      // âœ… å·²å¯ç”¨
    // ...
  }
}
```

##### **4. ç¡®è®¤ä¾èµ–å®‰è£…**:
```json
// package.json
{
  "dependencies": {
    "reflect-metadata": "^0.2.2",  // âœ… å·²æ­£ç¡®å®‰è£…
    "inversify": "^6.0.2",         // âœ… ä¾èµ–æ³¨å…¥æ¡†æ¶
    "inversify-express-utils": "^6.4.6"  // âœ… Expressé›†æˆ
  }
}
```

#### **ä¿®å¤æ•ˆæœ**:
- âœ… è§£å†³äº†Reflect.hasOwnMetadataæœªå®šä¹‰çš„é”™è¯¯
- âœ… ç¡®ä¿äº†Inversifyä¾èµ–æ³¨å…¥æ­£å¸¸å·¥ä½œ
- âœ… æ”¯æŒäº†æ‰€æœ‰è£…é¥°å™¨åŠŸèƒ½ï¼ˆ@injectable, @inject, @controllerç­‰ï¼‰

## ğŸ› ï¸ æŠ€æœ¯åŸç†è§£æ

### 1. reflect-metadataçš„ä½œç”¨
- **å…ƒæ•°æ®æ”¯æŒ**: ä¸ºTypeScriptè£…é¥°å™¨æä¾›è¿è¡Œæ—¶å…ƒæ•°æ®æ”¯æŒ
- **ç±»å‹ä¿¡æ¯**: ä¿å­˜å‚æ•°ç±»å‹ã€è¿”å›ç±»å‹ç­‰è®¾è®¡æ—¶ç±»å‹ä¿¡æ¯
- **ä¾èµ–æ³¨å…¥**: æ”¯æŒInversifyç­‰æ¡†æ¶çš„è‡ªåŠ¨ä¾èµ–æ³¨å…¥åŠŸèƒ½

### 2. å¯¼å…¥é¡ºåºçš„é‡è¦æ€§
- **åˆå§‹åŒ–æ—¶æœº**: reflect-metadataå¿…é¡»åœ¨ä»»ä½•è£…é¥°å™¨ä½¿ç”¨å‰åˆå§‹åŒ–
- **å…¨å±€å½±å“**: ä¸€æ—¦å¯¼å…¥ï¼Œå½±å“æ•´ä¸ªåº”ç”¨çš„è£…é¥°å™¨è¡Œä¸º
- **æ¨¡å—åŠ è½½**: Node.jsæ¨¡å—åŠ è½½é¡ºåºå†³å®šäº†åˆå§‹åŒ–é¡ºåº

### 3. JSONæ ¼å¼è§„èŒƒ
- **å”¯ä¸€é”®**: JSONå¯¹è±¡ä¸­çš„é”®å¿…é¡»å”¯ä¸€
- **æ„å»ºå·¥å…·**: ç°ä»£æ„å»ºå·¥å…·ä¼šæ£€æµ‹å¹¶è­¦å‘Šé‡å¤é”®
- **æ ‡å‡†å…¼å®¹**: éµå¾ªJSONæ ‡å‡†ç¡®ä¿è·¨å¹³å°å…¼å®¹æ€§

## ğŸ“‹ éªŒè¯æ­¥éª¤

### Frontendé¡¹ç›®éªŒè¯:
```bash
cd frontEnd
pnpm dev
# é¢„æœŸï¼šæ— é‡å¤é”®è­¦å‘Šï¼Œæ­£å¸¸å¯åŠ¨
```

### Serveré¡¹ç›®éªŒè¯:
```bash
cd server
npm run dev
# é¢„æœŸï¼šæ— reflect-metadataé”™è¯¯ï¼Œæ­£å¸¸å¯åŠ¨
```

### TypeScriptç¼–è¯‘éªŒè¯:
```bash
cd server
npx tsc --noEmit
# é¢„æœŸï¼šç¼–è¯‘é€šè¿‡ï¼Œæ— é”™è¯¯
```

## ğŸ¯ ä¿®å¤ä»·å€¼

### 1. ç¨³å®šæ€§æå‡
- **Frontend**: æ¶ˆé™¤æ„å»ºè­¦å‘Šï¼Œæé«˜æ„å»ºç¨³å®šæ€§
- **Server**: è§£å†³è¿è¡Œæ—¶é”™è¯¯ï¼Œç¡®ä¿æœåŠ¡æ­£å¸¸å¯åŠ¨
- **æ•´ä½“**: æé«˜äº†é¡¹ç›®çš„æ•´ä½“ç¨³å®šæ€§

### 2. å¼€å‘ä½“éªŒæ”¹å–„
- **æ— è­¦å‘Šå¯åŠ¨**: æ¸…æ´çš„å¯åŠ¨æ—¥å¿—ï¼Œæ— å¹²æ‰°ä¿¡æ¯
- **æ­£å¸¸åŠŸèƒ½**: ä¾èµ–æ³¨å…¥ç­‰æ ¸å¿ƒåŠŸèƒ½æ­£å¸¸å·¥ä½œ
- **è°ƒè¯•å‹å¥½**: å‡å°‘äº†ä¸å¿…è¦çš„é”™è¯¯ä¿¡æ¯

### 3. ä»£ç è´¨é‡ä¿è¯
- **è§„èŒƒéµå¾ª**: éµå¾ªJSONå’ŒTypeScriptæœ€ä½³å®è·µ
- **é”™è¯¯é¢„é˜²**: é¢„é˜²äº†æ½œåœ¨çš„è¿è¡Œæ—¶é”™è¯¯
- **ç»´æŠ¤æ€§**: æé«˜äº†ä»£ç çš„å¯ç»´æŠ¤æ€§

## ğŸš€ æœ€ä½³å®è·µæ€»ç»“

### 1. reflect-metadataä½¿ç”¨è§„èŒƒ
- âœ… æ€»æ˜¯åœ¨æœ€å‰é¢å¯¼å…¥reflect-metadata
- âœ… åœ¨æ‰€æœ‰ä½¿ç”¨è£…é¥°å™¨çš„æ¨¡å—ä¸­ç¡®ä¿å·²å¯¼å…¥
- âœ… é…ç½®æ­£ç¡®çš„TypeScriptè£…é¥°å™¨é€‰é¡¹

### 2. package.jsonç»´æŠ¤è§„èŒƒ
- âœ… å®šæœŸæ£€æŸ¥é‡å¤å­—æ®µ
- âœ… ä½¿ç”¨JSONæ ¼å¼éªŒè¯å·¥å…·
- âœ… ä¿æŒä¾èµ–ç‰ˆæœ¬çš„ä¸€è‡´æ€§

### 3. é¡¹ç›®å¯åŠ¨æ£€æŸ¥æ¸…å•
- âœ… æ£€æŸ¥æ„å»ºå·¥å…·è­¦å‘Šä¿¡æ¯
- âœ… éªŒè¯æ ¸å¿ƒä¾èµ–çš„æ­£ç¡®å¯¼å…¥
- âœ… ç¡®è®¤é…ç½®æ–‡ä»¶çš„æ­£ç¡®æ€§

## ğŸ‰ ä¿®å¤å®Œæˆæ€»ç»“

### âœ… **ä¿®å¤æˆæœ**
- **Frontend**: é‡å¤é”®è­¦å‘Šå·²æ¶ˆé™¤ï¼ŒViteå¯åŠ¨æ­£å¸¸
- **Server**: reflect-metadataé”™è¯¯å·²è§£å†³ï¼ŒInversifyæ­£å¸¸å·¥ä½œ
- **TypeScript**: ç¼–è¯‘æ£€æŸ¥é€šè¿‡ï¼Œç±»å‹å®‰å…¨å¾—åˆ°ä¿è¯

### âœ… **è´¨é‡æ”¹è¿›**
- **å¯åŠ¨ä½“éªŒ**: ä¸¤ä¸ªé¡¹ç›®éƒ½èƒ½æ— é”™è¯¯å¯åŠ¨
- **ä»£ç è§„èŒƒ**: éµå¾ªäº†æœ€ä½³å®è·µå’Œæ ‡å‡†è§„èŒƒ
- **é”™è¯¯é¢„é˜²**: å»ºç«‹äº†é”™è¯¯é¢„é˜²æœºåˆ¶

### âœ… **é•¿æœŸä»·å€¼**
- **ç¨³å®šæ€§**: æé«˜äº†é¡¹ç›®çš„é•¿æœŸç¨³å®šæ€§
- **å¯ç»´æŠ¤æ€§**: æ”¹å–„äº†ä»£ç çš„å¯ç»´æŠ¤æ€§
- **å¼€å‘æ•ˆç‡**: æå‡äº†å¼€å‘å›¢é˜Ÿçš„å·¥ä½œæ•ˆç‡

**ğŸ¯ ä¸¤ä¸ªé¡¹ç›®ç°åœ¨éƒ½èƒ½æ­£å¸¸å¯åŠ¨ï¼Œæ‰€æœ‰å¯åŠ¨é”™è¯¯å·²å®Œå…¨ä¿®å¤ï¼**

## ğŸ“ åç»­å»ºè®®

1. **å®šæœŸæ£€æŸ¥**: å®šæœŸè¿è¡Œé¡¹ç›®å¯åŠ¨æ£€æŸ¥ï¼Œç¡®ä¿æ— æ–°çš„é”™è¯¯å¼•å…¥
2. **ä¾èµ–ç®¡ç†**: ä¿æŒä¾èµ–ç‰ˆæœ¬çš„åŠæ—¶æ›´æ–°å’Œå…¼å®¹æ€§æ£€æŸ¥
3. **é…ç½®ç»´æŠ¤**: å®šæœŸå®¡æŸ¥å’Œæ›´æ–°é¡¹ç›®é…ç½®æ–‡ä»¶
4. **æ–‡æ¡£æ›´æ–°**: åŠæ—¶æ›´æ–°é¡¹ç›®å¯åŠ¨å’Œéƒ¨ç½²æ–‡æ¡£
